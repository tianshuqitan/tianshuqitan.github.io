<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.76" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <title>ä¼˜åŒ– Unity UI | Mr.Chen</title><meta name="description" content="æ²§æµ·ä¸€ç²Ÿ">
    <link rel="preload" href="/assets/style-BlCvd1fh.css" as="style"><link rel="stylesheet" href="/assets/style-BlCvd1fh.css">
    <link rel="modulepreload" href="/assets/app-CsjGXEvU.js"><link rel="modulepreload" href="/assets/Unity UI ä¼˜åŒ–.html-DzrK7W1l.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CNPyjhw9.js" as="script"><link rel="prefetch" href="/assets/AI.html-oc6xeUqm.js" as="script"><link rel="prefetch" href="/assets/Android.html-DIw2iyI5.js" as="script"><link rel="prefetch" href="/assets/Cocos.html-BIPrUY5H.js" as="script"><link rel="prefetch" href="/assets/Daily.html-DBdJ8fEH.js" as="script"><link rel="prefetch" href="/assets/Opengl.html-CMyDkLkz.js" as="script"><link rel="prefetch" href="/assets/Programme.html-Dnke2O6l.js" as="script"><link rel="prefetch" href="/assets/index.html-DxrYgCKn.js" as="script"><link rel="prefetch" href="/assets/Unity.html-Bveq9asn.js" as="script"><link rel="prefetch" href="/assets/Unreal.html-CvMI7x8P.js" as="script"><link rel="prefetch" href="/assets/index.html-BdP4rGBx.js" as="script"><link rel="prefetch" href="/assets/AssetBundle.html-CRzrtMQW.js" as="script"><link rel="prefetch" href="/assets/index.html-DuLT0aGT.js" as="script"><link rel="prefetch" href="/assets/index.html-DsDDsYJk.js" as="script"><link rel="prefetch" href="/assets/CSharp.html-CcI1vlpy.js" as="script"><link rel="prefetch" href="/assets/Go.html-C0rdencD.js" as="script"><link rel="prefetch" href="/assets/Lua.html-DoBIUixN.js" as="script"><link rel="prefetch" href="/assets/Python.html-DFfdY123.js" as="script"><link rel="prefetch" href="/assets/index.html-DmChpOUt.js" as="script"><link rel="prefetch" href="/assets/Rust.html-Dkb81Ytp.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu22rSdq.js" as="script"><link rel="prefetch" href="/assets/index.html-LXORi_D-.js" as="script"><link rel="prefetch" href="/assets/index.html-DLCDLqtL.js" as="script"><link rel="prefetch" href="/assets/DrawCall ä¼˜åŒ–.html-Dn2GyaJX.js" as="script"><link rel="prefetch" href="/assets/GPU å®ä¾‹åŒ–.html-Dh_2QP-b.js" as="script"><link rel="prefetch" href="/assets/index.html-C99mKWqU.js" as="script"><link rel="prefetch" href="/assets/SRP Batcher åŠ é€Ÿæ¸²æŸ“æ€§èƒ½.html-D8iiSzV-.js" as="script"><link rel="prefetch" href="/assets/Unity UI ä¼˜åŒ–å»ºè®®.html-DcToE2lA.js" as="script"><link rel="prefetch" href="/assets/äº†è§£ Unity ä¸­çš„ä¼˜åŒ–.html-DO1XRgau.js" as="script"><link rel="prefetch" href="/assets/åƒåœ¾å›æ”¶æœ€ä½³å®è·µ.html-Bqggq0m3.js" as="script"><link rel="prefetch" href="/assets/ç¨‹åºé›†.html-GwxH2mXv.js" as="script"><link rel="prefetch" href="/assets/Config.html-CjAPgdGY.js" as="script"><link rel="prefetch" href="/assets/Deployment.html-CIhHN5IP.js" as="script"><link rel="prefetch" href="/assets/Install.html-98m4fYoP.js" as="script"><link rel="prefetch" href="/assets/Intro.html-C5pkU5ey.js" as="script"><link rel="prefetch" href="/assets/index.html-BInJsaiq.js" as="script"><link rel="prefetch" href="/assets/ThemeHope.html-SbgZAlaX.js" as="script"><link rel="prefetch" href="/assets/index.html-D0hYNrkA.js" as="script"><link rel="prefetch" href="/assets/SourceCode_List.html-CQFkdZbr.js" as="script"><link rel="prefetch" href="/assets/C_ æŠ€æœ¯è¦ç‚¹.html-DJcgPzkn.js" as="script"><link rel="prefetch" href="/assets/index.html-D0pr8YKy.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®è¡¨ä¸ç¨‹åº.html-CLWL8wX0.js" as="script"><link rel="prefetch" href="/assets/ç”¨æˆ·ç•Œé¢.html-BXTreM2D.js" as="script"><link rel="prefetch" href="/assets/è½¯ä»¶æ¶æ„.html-B8oCkT-V.js" as="script"><link rel="prefetch" href="/assets/404.html-CSRqLESn.js" as="script"><link rel="prefetch" href="/assets/index.html-Drz3prZX.js" as="script"><link rel="prefetch" href="/assets/index.html-MI46GsCM.js" as="script"><link rel="prefetch" href="/assets/index.html-BCxYlzCp.js" as="script"><link rel="prefetch" href="/assets/index.html-CqLkWv-v.js" as="script"><link rel="prefetch" href="/assets/index.html-U3Fkd598.js" as="script"><link rel="prefetch" href="/assets/index.html-BF8Zq_B7.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/SearchResult-DYZpWzec.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><!----><!----><span class="vp-site-name">Mr.Chen</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ" iconsizing="height"><!--[--><i class="vp-icon fas fa-house" sizing="height"></i><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/Unity/" aria-label="Unity" iconsizing="height"><!---->Unity<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Vue"><!--[--><!---->Vue<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Vue/Vuepress/" aria-label="Vuepress" iconsizing="both"><!---->Vuepress<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Bookmarks/" aria-label="ä¹¦ç­¾" iconsizing="height"><!---->ä¹¦ç­¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Language/" aria-label="ç¼–ç¨‹è¯­è¨€" iconsizing="height"><!---->ç¼–ç¨‹è¯­è¨€<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">æœç´¢</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/AssetBundle.html" aria-label="AssetBundle" iconsizing="both"><!---->AssetBundle<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Books</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">ä¼˜åŒ–</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/DrawCall%20%E4%BC%98%E5%8C%96.html" aria-label="DrawCall ä¼˜åŒ–" iconsizing="both"><!---->DrawCall ä¼˜åŒ–<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/SRP%20Batcher%20%E5%8A%A0%E9%80%9F%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD.html" aria-label="SRP Batcher åŠ é€Ÿæ¸²æŸ“æ€§èƒ½" iconsizing="both"><!---->SRP Batcher åŠ é€Ÿæ¸²æŸ“æ€§èƒ½<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/Unity%20UI%20%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.html" aria-label="Unity UI ä¼˜åŒ–å»ºè®®" iconsizing="both"><!---->Unity UI ä¼˜åŒ–å»ºè®®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/%E4%BA%86%E8%A7%A3%20Unity%20%E4%B8%AD%E7%9A%84%E4%BC%98%E5%8C%96.html" aria-label="äº†è§£ Unity ä¸­çš„ä¼˜åŒ–" iconsizing="both"><!---->äº†è§£ Unity ä¸­çš„ä¼˜åŒ–<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/Unity/Optimization/Unity%20UI%20%E4%BC%98%E5%8C%96.html" aria-label="ä¼˜åŒ– Unity UI" iconsizing="both"><!---->ä¼˜åŒ– Unity UI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" aria-label="åƒåœ¾å›æ”¶æœ€ä½³å®è·µ" iconsizing="both"><!---->åƒåœ¾å›æ”¶æœ€ä½³å®è·µ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Unity/Optimization/%E7%A8%8B%E5%BA%8F%E9%9B%86.html" aria-label="ç¨‹åºé›†" iconsizing="both"><!---->ç¨‹åºé›†<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æµ‹è¯•</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ä¼˜åŒ– Unity UI</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Mr.Chen</span></span><span property="author" content="Mr.Chen"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´4æœˆ18æ—¥</span><meta property="datePublished" content="2025-04-18T10:32:06.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 52 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT52M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="ä¼˜åŒ–-unity-ui" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŒ–-unity-ui"><span>ä¼˜åŒ– Unity UI</span></a></h1><p><a href="https://learn.unity.com/tutorial/optimizing-unity-ui" target="_blank" rel="noopener noreferrer">åŸæ–‡åœ°å€ - UnityLearn</a></p><p>ä¼˜åŒ–åŸºäº Unity UI çš„ç”¨æˆ·ç•Œé¢æ˜¯ä¸€é—¨è‰ºæœ¯ã€‚æœ¬æŒ‡å—å°†è®¨è®º Unity UI çš„åŸºæœ¬æ¦‚å¿µã€åº•å±‚ç®—æ³•å’Œä»£ç ï¼Œä»¥åŠå¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚</p><h2 id="_1-unity-ui-ä¼˜åŒ–æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#_1-unity-ui-ä¼˜åŒ–æŒ‡å—"><span>1. Unity UI ä¼˜åŒ–æŒ‡å—</span></a></h2><p>ä¼˜åŒ–åŸºäº Unity UI çš„ç”¨æˆ·ç•Œé¢æ˜¯ä¸€é—¨è‰ºæœ¯ã€‚ç¡¬æ€§è§„åˆ™å¾ˆå°‘è§ï¼›ç›¸åï¼Œå¿…é¡»æ ¹æ®ç³»ç»Ÿè¡Œä¸ºä»”ç»†è¯„ä¼°æ¯ç§æƒ…å†µã€‚ä¼˜åŒ–ä»»ä½• Unity UI æ—¶çš„æ ¸å¿ƒçŸ›ç›¾æ˜¯åœ¨ç»˜åˆ¶è°ƒç”¨å’Œæ‰¹å¤„ç†æˆæœ¬ä¹‹é—´å–å¾—å¹³è¡¡ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ä¸€äº›å¸¸è¯†æ€§æŠ€æœ¯æ¥å‡å°‘å…¶ä¸­ä¸€é¡¹ï¼Œä½†å¤æ‚çš„ UI å¿…é¡»åšå‡ºæƒè¡¡ã€‚</p><p>ç„¶è€Œï¼Œä¸å…¶ä»–é¢†åŸŸçš„æœ€ä½³å®è·µä¸€æ ·ï¼Œä¼˜åŒ– Unity UI çš„å°è¯•åº”ä»æ€§èƒ½åˆ†æå¼€å§‹ã€‚åœ¨å°è¯•ä¼˜åŒ– Unity UI ç³»ç»Ÿä¹‹å‰ï¼Œä¸»è¦ä»»åŠ¡æ˜¯æ‰¾åˆ°è§‚å¯Ÿåˆ°çš„æ€§èƒ½é—®é¢˜çš„ç¡®åˆ‡åŸå› ã€‚Unity UI ç”¨æˆ·é€šå¸¸ä¼šé‡åˆ°å››ç±»é—®é¢˜ï¼š</p><ul><li>è¿‡åº¦çš„ GPU ç‰‡æ®µç€è‰²å™¨ä½¿ç”¨ï¼ˆå³å¡«å……ç‡è¿‡åº¦ä½¿ç”¨ï¼‰</li><li>CPU æ—¶é—´è¿‡å¤šç”¨äºé‡å»º Canvas æ‰¹å¤„ç†</li><li>è¿‡å¤šçš„ Canvas æ‰¹å¤„ç†é‡å»ºï¼ˆè¿‡åº¦è„æ ‡è®°ï¼‰</li><li>CPU æ—¶é—´è¿‡å¤šç”¨äºç”Ÿæˆé¡¶ç‚¹ï¼ˆé€šå¸¸æ¥è‡ªæ–‡æœ¬ï¼‰</li></ul><p>åŸåˆ™ä¸Šå¯ä»¥åˆ›å»ºä¸€ä¸ªæ€§èƒ½å—é™äºå‘é€åˆ° GPU çš„ç»˜åˆ¶è°ƒç”¨æ•°é‡çš„ Unity UIã€‚ç„¶è€Œåœ¨å®è·µä¸­ï¼Œä»»ä½•å› ç»˜åˆ¶è°ƒç”¨è€Œä½¿ GPU è¿‡è½½çš„é¡¹ç›®æ›´å¯èƒ½æ˜¯å—é™äºå¡«å……ç‡è¿‡åº¦ä½¿ç”¨ã€‚</p><p>æœ¬æŒ‡å—å°†è®¨è®º Unity UI çš„åŸºæœ¬æ¦‚å¿µã€åº•å±‚ç®—æ³•å’Œä»£ç ï¼Œä»¥åŠå¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚å®ƒåˆ†ä¸ºäº”ä¸ªç« èŠ‚ï¼š</p><ol><li><a href="#2-unity-ui-%E5%9F%BA%E7%A1%80">Unity UI åŸºç¡€</a> ç« èŠ‚å®šä¹‰äº† Unity UI ç‰¹æœ‰çš„æœ¯è¯­ï¼Œå¹¶è®¨è®ºäº†è®¸å¤šç”¨äºæ¸²æŸ“ UI çš„åŸºæœ¬è¿‡ç¨‹çš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬æ‰¹å¤„ç†å‡ ä½•ä½“çš„æ„å»ºã€‚å¼ºçƒˆå»ºè®®è¯»è€…ä»æœ¬ç« å¼€å§‹ã€‚</li><li><a href="#3-unity-ui-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">Unity UI æ€§èƒ½åˆ†æå·¥å…·</a> ç« èŠ‚è®¨è®ºä½¿ç”¨å¼€å‘è€…å¯ç”¨çš„å„ç§å·¥å…·æ”¶é›†æ€§èƒ½åˆ†ææ•°æ®ã€‚</li><li><a href="#4-%E5%A1%AB%E5%85%85%E7%8E%87-canvas-%E5%92%8C%E8%BE%93%E5%85%A5">å¡«å……ç‡ Canvas å’Œè¾“å…¥</a> ç« èŠ‚è®¨è®ºæé«˜ Unity UI çš„ Canvas å’Œè¾“å…¥ç»„ä»¶æ€§èƒ½çš„æ–¹æ³•ã€‚</li><li><a href="#5-%E4%BC%98%E5%8C%96-ui-%E6%8E%A7%E4%BB%B6">UI æ§ä»¶</a> ç« èŠ‚è®¨è®º UI æ–‡æœ¬ã€æ»šåŠ¨è§†å›¾å’Œå…¶ä»–ç‰¹å®šç»„ä»¶çš„ä¼˜åŒ–ï¼Œä»¥åŠä¸€äº›ä¸é€‚åˆå…¶ä»–åœ°æ–¹çš„æŠ€å·§ã€‚</li><li><a href="#6-%E5%85%B6%E4%BB%96-ui-%E4%BC%98%E5%8C%96%E6%8A%80%E6%9C%AF%E5%92%8C%E6%8A%80%E5%B7%A7">å…¶ä»–æŠ€æœ¯å’ŒæŠ€å·§</a> ç« èŠ‚è®¨è®ºä¸€äº›ä¸é€‚åˆå…¶ä»–åœ°æ–¹çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ UI ç³»ç»Ÿä¸­ä¸€äº›åŸºæœ¬æŠ€å·§å’Œ&quot;é™·é˜±&quot;çš„è§£å†³æ–¹æ³•ã€‚</li></ol><p><strong>UI æºä»£ç </strong></p><p>è¯·è®°ä½ï¼ŒUnity UI çš„ Graphic å’Œ Layout ç»„ä»¶æ˜¯å®Œå…¨å¼€æºçš„ã€‚å®ƒä»¬çš„æºä»£ç å¯ä»¥åœ¨ <a href="https://github.com/Unity-Technologies/uGUI" target="_blank" rel="noopener noreferrer">Unity-Technologies uGUI</a> ä¸­æ‰¾åˆ°ã€‚</p><h2 id="_2-unity-ui-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#_2-unity-ui-åŸºç¡€"><span>2. Unity UI åŸºç¡€</span></a></h2><p>ç†è§£ç»„æˆ Unity UI ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†å¾ˆé‡è¦ã€‚æœ‰å‡ ä¸ªåŸºæœ¬ç±»å’Œç»„ä»¶å…±åŒæ„æˆäº†è¿™ä¸ªç³»ç»Ÿã€‚æœ¬ç« é¦–å…ˆå®šä¹‰æœ¬ç³»åˆ—æ–‡ç« ä¸­ä½¿ç”¨çš„è®¸å¤šæœ¯è¯­ï¼Œç„¶åè®¨è®º Unity UI å‡ ä¸ªå…³é”®ç³»ç»Ÿçš„åº•å±‚è¡Œä¸ºã€‚</p><h3 id="æœ¯è¯­" tabindex="-1"><a class="header-anchor" href="#æœ¯è¯­"><span>æœ¯è¯­</span></a></h3><ul><li><p><code>Canvas</code> æ˜¯ Unity çš„åŸç”Ÿä»£ç ç»„ä»¶ï¼Œè¢« Unity çš„æ¸²æŸ“ç³»ç»Ÿç”¨æ¥æä¾›åˆ†å±‚çš„å‡ ä½•ä½“ï¼Œè¿™äº›å‡ ä½•ä½“å°†è¢«ç»˜åˆ¶åœ¨æ¸¸æˆçš„ä¸–ç•Œç©ºé—´ä¸­æˆ–ä¹‹ä¸Šã€‚</p><p><code>Canvas</code> è´Ÿè´£å°†å…¶ç»„æˆçš„å‡ ä½•ä½“ç»„åˆæˆæ‰¹å¤„ç†ï¼Œç”Ÿæˆé€‚å½“çš„æ¸²æŸ“å‘½ä»¤å¹¶å°†è¿™äº›å‘½ä»¤å‘é€åˆ° Unity çš„å›¾å½¢ç³»ç»Ÿã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯åœ¨åŸç”Ÿ C++ ä»£ç ä¸­å®Œæˆçš„ï¼Œç§°ä¸ºé‡æ–°æ‰¹å¤„ç†æˆ–æ‰¹å¤„ç†æ„å»ºã€‚å½“ Canvas è¢«æ ‡è®°ä¸ºåŒ…å«éœ€è¦é‡æ–°æ‰¹å¤„ç†çš„å‡ ä½•ä½“æ—¶ï¼ŒCanvas è¢«è®¤ä¸ºæ˜¯è„çš„ã€‚</p></li><li><p><code>Geometry</code> ç”± Canvas Renderer ç»„ä»¶æä¾›ç»™ Canvasã€‚</p></li><li><p>å­ Canvas(Sub-canvas) åªæ˜¯åµŒå¥—åœ¨å¦ä¸€ä¸ª Canvas ç»„ä»¶ä¸­çš„ Canvas ç»„ä»¶ã€‚å­ Canvas å°†å…¶å­é¡¹ä¸çˆ¶é¡¹éš”ç¦»ï¼›è„çš„å­é¡¹ä¸ä¼šå¼ºåˆ¶çˆ¶é¡¹é‡å»ºå…¶å‡ ä½•ä½“ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨æŸäº›è¾¹ç¼˜æƒ…å†µä¸‹è¿™ä¸æˆç«‹ï¼Œä¾‹å¦‚å½“çˆ¶ Canvas çš„å˜åŒ–å¯¼è‡´å­ Canvas è°ƒæ•´å¤§å°æ—¶ã€‚</p></li><li><p><code>Graphic</code> æ˜¯ Unity UI C# åº“æä¾›çš„ä¸€ä¸ªåŸºç±»ã€‚å®ƒæ˜¯æ‰€æœ‰å‘ Canvas ç³»ç»Ÿæä¾›å¯ç»˜åˆ¶å‡ ä½•ä½“çš„ Unity UI C# ç±»çš„åŸºç±»ã€‚å¤§å¤šæ•°å†…ç½®çš„ Unity UI Graphics éƒ½æ˜¯é€šè¿‡ MaskableGraphic å­ç±»å®ç°çš„ï¼Œè¿™å…è®¸å®ƒä»¬é€šè¿‡ IMaskable æ¥å£è¢«é®ç½©ã€‚Drawable çš„ä¸»è¦å­ç±»æ˜¯ Image å’Œ Textï¼Œå®ƒä»¬æä¾›äº†åŒåçš„ç»„ä»¶ã€‚</p></li><li><p><code>Layout</code> ç»„ä»¶æ§åˆ¶ RectTransforms çš„å¤§å°å’Œä½ç½®ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºéœ€è¦ç›¸å¯¹å¤§å°æˆ–å†…å®¹ç›¸å¯¹å®šä½çš„å¤æ‚å¸ƒå±€ã€‚Layout ç»„ä»¶ä»…ä¾èµ–äº RectTransformsï¼Œå¹¶ä¸”ä»…å½±å“å…¶å…³è”çš„ RectTransforms çš„å±æ€§ã€‚å®ƒä»¬ä¸ä¾èµ–äº Graphic ç±»ï¼Œå¯ä»¥ç‹¬ç«‹äº Unity UI çš„ Graphic ç»„ä»¶ä½¿ç”¨ã€‚</p></li><li><p><code>Graphic</code> å’Œ <code>Layout</code> ç»„ä»¶éƒ½ä¾èµ–äº CanvasUpdateRegistry ç±»ï¼Œè¯¥ç±»åœ¨ Unity Editor ç•Œé¢ä¸­ä¸å…¬å¼€ã€‚è¿™ä¸ªç±»è·Ÿè¸ªå¿…é¡»æ›´æ–°çš„ Layout ç»„ä»¶å’Œ Graphic ç»„ä»¶çš„é›†åˆï¼Œå¹¶åœ¨å®ƒä»¬å…³è”çš„ Canvas è°ƒç”¨ willRenderCanvases äº‹ä»¶æ—¶æ ¹æ®éœ€è¦è§¦å‘æ›´æ–°ã€‚</p></li><li><p><code>Layout</code> å’Œ <code>Graphic</code> ç»„ä»¶çš„æ›´æ–°ç§°ä¸ºé‡å»ºã€‚é‡å»ºè¿‡ç¨‹å°†åœ¨æœ¬æ–‡æ¡£åé¢è¯¦ç»†è®¨è®ºã€‚</p></li></ul><h3 id="æ¸²æŸ“ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“ç»†èŠ‚"><span>æ¸²æŸ“ç»†èŠ‚</span></a></h3><p>åœ¨ Unity UI ä¸­ç»„åˆç”¨æˆ·ç•Œé¢æ—¶ï¼Œè¯·è®°ä½ Canvas ç»˜åˆ¶çš„æ‰€æœ‰å‡ ä½•ä½“éƒ½å°†åœ¨ <strong>é€æ˜é˜Ÿåˆ—</strong> ä¸­ç»˜åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUnity UI ç”Ÿæˆçš„å‡ ä½•ä½“å°†å§‹ç»ˆä½¿ç”¨ alpha æ··åˆ <strong>ä»å‰åˆ°å</strong> ç»˜åˆ¶ã€‚ä»æ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œéœ€è¦è®°ä½çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œå³ä½¿å¤šè¾¹å½¢å®Œå…¨è¢«å…¶ä»–ä¸é€æ˜å¤šè¾¹å½¢è¦†ç›–ï¼Œä»å¤šè¾¹å½¢å…‰æ …åŒ–çš„æ¯ä¸ªåƒç´ éƒ½å°†è¢«é‡‡æ ·ã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œè¿™ç§é«˜çº§åˆ«çš„è¿‡åº¦ç»˜åˆ¶ä¼šè¿…é€Ÿè¶…è¿‡ GPU çš„å¡«å……ç‡èƒ½åŠ›ã€‚</p><h3 id="æ‰¹å¤„ç†-batch-æ„å»ºè¿‡ç¨‹-canvas" tabindex="-1"><a class="header-anchor" href="#æ‰¹å¤„ç†-batch-æ„å»ºè¿‡ç¨‹-canvas"><span>æ‰¹å¤„ç†(Batch)æ„å»ºè¿‡ç¨‹(Canvas)</span></a></h3><p>æ‰¹å¤„ç†æ„å»ºè¿‡ç¨‹æ˜¯ Canvas å°†å…¶ UI å…ƒç´ è¡¨ç¤ºçš„ç½‘æ ¼ç»„åˆå¹¶ç”Ÿæˆé€‚å½“çš„æ¸²æŸ“å‘½ä»¤å‘é€åˆ° Unity å›¾å½¢ç®¡é“çš„è¿‡ç¨‹ã€‚æ­¤è¿‡ç¨‹çš„ç»“æœè¢«ç¼“å­˜å¹¶é‡å¤ä½¿ç”¨ï¼Œç›´åˆ° Canvas è¢«æ ‡è®°ä¸ºè„ï¼Œè¿™ä¼šåœ¨å…¶ç»„æˆçš„ç½‘æ ¼å‘ç”Ÿå˜åŒ–æ—¶å‘ç”Ÿã€‚</p><p>Canvas ä½¿ç”¨çš„ç½‘æ ¼å–è‡ªé™„åŠ åˆ° Canvas ä½†ä¸åŒ…å«åœ¨ä»»ä½•å­ Canvas ä¸­çš„ Canvas Renderer ç»„ä»¶é›†åˆã€‚</p><p>è®¡ç®—æ‰¹å¤„ç†éœ€è¦æŒ‰æ·±åº¦å¯¹ç½‘æ ¼è¿›è¡Œæ’åºï¼Œå¹¶æ£€æŸ¥å®ƒä»¬æ˜¯å¦æœ‰é‡å ã€å…±äº«æè´¨ç­‰ã€‚æ­¤æ“ä½œæ˜¯å¤šçº¿ç¨‹çš„ï¼Œå› æ­¤å…¶æ€§èƒ½åœ¨ä¸åŒ CPU æ¶æ„ä¹‹é—´é€šå¸¸ä¼šæœ‰å¾ˆå¤§å·®å¼‚ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨ SoCï¼ˆé€šå¸¸å…·æœ‰å°‘é‡ CPU æ ¸å¿ƒï¼‰å’Œç°ä»£æ¡Œé¢ CPUï¼ˆé€šå¸¸å…·æœ‰ 4 ä¸ªæˆ–æ›´å¤šæ ¸å¿ƒï¼‰ä¹‹é—´ã€‚</p><p><strong>é‡å»º(Rebuild)è¿‡ç¨‹(Graphic)</strong></p><p>é‡å»ºè¿‡ç¨‹æ˜¯é‡æ–°è®¡ç®— Unity UI çš„ C# Graphic ç»„ä»¶çš„å¸ƒå±€å’Œç½‘æ ¼çš„åœ°æ–¹ã€‚è¿™æ˜¯åœ¨ CanvasUpdateRegistry ç±»ä¸­æ‰§è¡Œçš„ã€‚è¯·è®°ä½ï¼Œè¿™æ˜¯ä¸€ä¸ª C# ç±»ï¼Œå…¶æºä»£ç å¯ä»¥åœ¨ <a href="https://github.com/Unity-Technologies/uGUI" target="_blank" rel="noopener noreferrer">Unity-Technologies uGUI</a> ä¸Šæ‰¾åˆ°ã€‚</p><p>åœ¨ CanvasUpdateRegistry ä¸­ï¼Œæ„Ÿå…´è¶£çš„æ–¹æ³•æ˜¯ PerformUpdateã€‚æ¯å½“ Canvas ç»„ä»¶è°ƒç”¨ <a href="http://docs.unity3d.com/ScriptReference/Canvas-willRenderCanvases.html" target="_blank" rel="noopener noreferrer">WillRenderCanvases</a> äº‹ä»¶æ—¶ï¼Œå°±ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚æ­¤äº‹ä»¶æ¯å¸§è°ƒç”¨ä¸€æ¬¡ã€‚</p><p><code>PerformUpdate</code> è¿è¡Œè¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul><li>è„çš„ Layout ç»„ä»¶è¢«è¦æ±‚é€šè¿‡ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.ICanvasElement.html" target="_blank" rel="noopener noreferrer">ICanvasElement.Rebuild</a> æ–¹æ³•é‡å»ºå®ƒä»¬çš„å¸ƒå±€ã€‚</li><li>ä»»ä½•å·²æ³¨å†Œçš„ Clipping ç»„ä»¶ï¼ˆå¦‚ Maskï¼‰è¢«è¦æ±‚å‰”é™¤ä»»ä½•è¢«å‰ªè£çš„ç»„ä»¶ã€‚è¿™æ˜¯é€šè¿‡ <code>ClippingRegistry.Cull</code> å®Œæˆçš„ã€‚</li><li>è„çš„ Graphic ç»„ä»¶è¢«è¦æ±‚é‡å»ºå®ƒä»¬çš„å›¾å½¢å…ƒç´ ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// CanvasUpdateRegistry.cs</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PerformUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">BeginSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SampleType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Layout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    CleanInvalidItems</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    m_PerformingLayoutUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">s_SortLayoutFunction</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">PostLayout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">BeginSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">m_CanvasUpdateProfilerStrings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> j</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">j</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">j</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">j</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ObjectValidForUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                    rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                Debug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LogException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">transform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EndSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LayoutComplete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    m_LayoutRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    m_PerformingLayoutUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EndSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SampleType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Layout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">BeginSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SampleType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Render</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // now layout is complete do culling...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">BeginSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">m_CullingUpdateProfilerString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    ClipperRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">instance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Cull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EndSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    m_PerformingGraphicUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">PreRender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MaxUpdateValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">BeginSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">m_CanvasUpdateProfilerStrings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> k</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">k</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">k</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> element</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">k</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ObjectValidForUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">element</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                    element</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                Debug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LogException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">k</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">transform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        UnityEngine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Profiler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EndSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GraphicUpdateComplete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    m_GraphicRebuildQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    m_PerformingGraphicUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EndSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UISystemProfilerApi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SampleType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Render</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äº <code>Layout</code> å’Œ <code>Graphic</code> é‡å»ºï¼Œè¯¥è¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ã€‚Layout é‡å»ºåˆ†ä¸ºä¸‰æ­¥ï¼š<code>PreLayout</code>ã€<code>Layout</code> å’Œ <code>PostLayout</code>ï¼Œè€Œ Graphic é‡å»ºåˆ†ä¸ºä¸¤æ­¥ï¼š<code>PreRender</code> å’Œ <code>LatePreRender</code>ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> enum</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CanvasUpdate</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Prelayout </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Layout </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    PostLayout </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    PreRender </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    LatePreRender </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    MaxUpdateValue </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="layout-é‡å»º" tabindex="-1"><a class="header-anchor" href="#layout-é‡å»º"><span>Layout é‡å»º</span></a></h3><p>è¦é‡æ–°è®¡ç®—ä¸€ä¸ªæˆ–å¤šä¸ª Layout ç»„ä»¶ä¸­åŒ…å«çš„ç»„ä»¶çš„é€‚å½“ä½ç½®ï¼ˆå’Œæ½œåœ¨å¤§å°ï¼‰ï¼Œéœ€è¦æŒ‰å®ƒä»¬åœ¨ GameObject å±‚æ¬¡ç»“æ„ä¸­çš„é€‚å½“å±‚æ¬¡é¡ºåºåº”ç”¨ Layoutã€‚å±‚æ¬¡ç»“æ„ä¸­æ›´é è¿‘æ ¹éƒ¨çš„ Layout å¯èƒ½ä¼šæ”¹å˜åµŒå¥—åœ¨å…¶ä¸­çš„ä»»ä½• Layout çš„ä½ç½®å’Œå¤§å°ï¼Œå› æ­¤å¿…é¡»é¦–å…ˆè®¡ç®—ã€‚</p><p>ä¸ºæ­¤ï¼ŒUnity UI æŒ‰å®ƒä»¬åœ¨å±‚æ¬¡ç»“æ„ä¸­çš„æ·±åº¦å¯¹è„çš„ Layout ç»„ä»¶åˆ—è¡¨è¿›è¡Œæ’åºã€‚å±‚æ¬¡ç»“æ„ä¸­è¾ƒé«˜çš„é¡¹ï¼ˆå³çˆ¶ Transform è¾ƒå°‘çš„é¡¹ï¼‰è¢«ç§»åˆ°åˆ—è¡¨çš„å‰é¢ã€‚</p><p>ç„¶åï¼Œæ’åºåçš„ Layout ç»„ä»¶åˆ—è¡¨è¢«è¦æ±‚é‡å»ºå®ƒä»¬çš„å¸ƒå±€ï¼›è¿™æ˜¯å®é™…æ”¹å˜ç”± Layout ç»„ä»¶æ§åˆ¶çš„ UI å…ƒç´ ä½ç½®å’Œå¤§å°çš„éƒ¨åˆ†ã€‚æœ‰å…³å•ä¸ªå…ƒç´ çš„ä½ç½®å¦‚ä½•å— Layout å½±å“çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚é˜… Unity æ‰‹å†Œä¸­çš„ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/UIAutoLayout.html" target="_blank" rel="noopener noreferrer">UI Auto Layout</a> éƒ¨åˆ†ã€‚</p><h3 id="graphic-é‡å»º" tabindex="-1"><a class="header-anchor" href="#graphic-é‡å»º"><span>Graphic é‡å»º</span></a></h3><p>å½“ Graphic ç»„ä»¶è¢«é‡å»ºæ—¶ï¼ŒUnity UI å°†æ§åˆ¶æƒä¼ é€’ç»™ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.ICanvasElement.html" target="_blank" rel="noopener noreferrer">ICanvasElement</a> æ¥å£çš„ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.ICanvasElement.html" target="_blank" rel="noopener noreferrer">Rebuild</a> æ–¹æ³•ã€‚Graphic å®ç°è¿™ä¸€ç‚¹ï¼Œå¹¶åœ¨é‡å»ºè¿‡ç¨‹çš„ <code>PreRender</code> é˜¶æ®µè¿è¡Œä¸¤ä¸ªä¸åŒçš„é‡å»ºæ­¥éª¤ã€‚</p><ul><li>å¦‚æœé¡¶ç‚¹æ•°æ®è¢«æ ‡è®°ä¸ºè„ï¼ˆä¾‹å¦‚å½“ç»„ä»¶çš„ RectTransform æ”¹å˜å¤§å°æ—¶ï¼‰ï¼Œåˆ™é‡å»ºç½‘æ ¼ã€‚</li><li>å¦‚æœæè´¨æ•°æ®è¢«æ ‡è®°ä¸ºè„ï¼ˆä¾‹å¦‚å½“ç»„ä»¶çš„æè´¨æˆ–çº¹ç†æ”¹å˜æ—¶ï¼‰ï¼Œåˆ™æ›´æ–°é™„åŠ çš„ Canvas Renderer çš„æè´¨ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> virtual</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Rebuild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">canvasRenderer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> canvasRenderer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">cull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    switch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        case</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CanvasUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PreRender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">m_VertsDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                UpdateGeometry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                m_VertsDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">m_MaterialDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                UpdateMaterial</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                m_MaterialDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Graphic é‡å»ºä¸ä¼šä»¥ä»»ä½•ç‰¹å®šé¡ºåºéå† Graphic ç»„ä»¶åˆ—è¡¨ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•æ’åºæ“ä½œã€‚</p><h2 id="_3-unity-ui-æ€§èƒ½åˆ†æå·¥å…·" tabindex="-1"><a class="header-anchor" href="#_3-unity-ui-æ€§èƒ½åˆ†æå·¥å…·"><span>3. Unity UI æ€§èƒ½åˆ†æå·¥å…·</span></a></h2><p>æœ‰å‡ ä¸ªæ€§èƒ½åˆ†æå·¥å…·å¯ç”¨äºåˆ†æ Unity UI çš„æ€§èƒ½ã€‚å…³é”®å·¥å…·æ˜¯ï¼š</p><ul><li>Unity Profiler</li><li>Unity Frame Debugger</li><li>Xcode çš„ Instruments æˆ– Intel VTune</li><li>Xcode çš„ Frame Debugger æˆ– Intel GPA</li></ul><p>å¤–éƒ¨å·¥å…·æä¾›æ–¹æ³•çº§ CPU åˆ†æï¼Œå…·æœ‰æ¯«ç§’ï¼ˆæˆ–æ›´å¥½ï¼‰åˆ†è¾¨ç‡ï¼Œä»¥åŠè¯¦ç»†çš„ç»˜åˆ¶è°ƒç”¨å’Œç€è‰²å™¨åˆ†æã€‚è®¾ç½®å’Œä½¿ç”¨ä¸Šè¿°å·¥å…·çš„è¯´æ˜è¶…å‡ºäº†æœ¬æŒ‡å—çš„èŒƒå›´ã€‚è¯·æ³¨æ„ï¼ŒXCode Frame Debugger å’Œ Instruments ä»…é€‚ç”¨äº Apple å¹³å°çš„ IL2CPP æ„å»ºï¼Œå› æ­¤ç›®å‰åªèƒ½ç”¨äºåˆ†æ iOS æ„å»ºã€‚</p><h3 id="unity-profiler" tabindex="-1"><a class="header-anchor" href="#unity-profiler"><span>Unity Profiler</span></a></h3><p>Unity Profiler çš„ä¸»è¦ç”¨é€”æ˜¯æ‰§è¡Œæ¯”è¾ƒåˆ†æï¼šåœ¨ Unity Profiler è¿è¡Œæ—¶å¯ç”¨å’Œç¦ç”¨ UI å…ƒç´ å¯ä»¥å¿«é€Ÿç¼©å°å¯¹æ€§èƒ½é—®é¢˜è´Ÿä¸»è¦è´£ä»»çš„ UI å±‚æ¬¡ç»“æ„éƒ¨åˆ†ã€‚</p><p>è¦åˆ†æè¿™ä¸€ç‚¹ï¼Œè¯·è§‚å¯Ÿåˆ†æå™¨è¾“å‡ºä¸­çš„ <code>Canvas.BuildBatch</code> å’Œ <code>Canvas.SendWillRenderCanvases</code> è¡Œã€‚</p><p><img src="/assets/sendwillrendercanvases-C4IhNZT3.png" alt=""></p><p><code>Canvas.BuildBatch</code> æ˜¯æ‰§è¡Œ Canvas æ‰¹å¤„ç†æ„å»ºè¿‡ç¨‹çš„æœ¬æœºä»£ç è®¡ç®—ï¼Œå¦‚å‰æ‰€è¿°ã€‚</p><p><code>Canvas.SendWillRenderCanvases</code> åŒ…å«å¯¹è®¢é˜… Canvas ç»„ä»¶çš„ <code>willRenderCanvases</code> äº‹ä»¶çš„ C# è„šæœ¬çš„è°ƒç”¨ã€‚Unity UI çš„ <code>CanvasUpdateRegistry</code> ç±»æ¥æ”¶æ­¤äº‹ä»¶å¹¶ä½¿ç”¨å®ƒæ¥è¿è¡Œå‰é¢æè¿°çš„é‡å»ºè¿‡ç¨‹ã€‚é¢„è®¡ä»»ä½•è„çš„ UI ç»„ä»¶éƒ½ä¼šåœ¨æ­¤æ—¶æ›´æ–°å®ƒä»¬çš„ Canvas Renderersã€‚</p><p>æ³¨æ„ï¼šä¸ºäº†æ›´å®¹æ˜“çœ‹åˆ° UI æ€§èƒ½çš„å·®å¼‚ï¼Œé€šå¸¸å»ºè®®ç¦ç”¨é™¤ <code>Rendering</code>ã€<code>Scripts</code> å’Œ <code>UI</code> ä¹‹å¤–çš„æ‰€æœ‰è·Ÿè¸ªç±»åˆ«ã€‚è¿™å¯ä»¥é€šè¿‡å•å‡» CPU ä½¿ç”¨ç‡åˆ†æå™¨å·¦ä¾§è·Ÿè¸ªç±»åˆ«åç§°æ—è¾¹çš„å½©è‰²æ¡†æ¥å®Œæˆã€‚è¿˜å¯ä»¥é€šè¿‡å•å‡»å¹¶å‘ä¸Šæˆ–å‘ä¸‹æ‹–åŠ¨ç±»åˆ«åç§°æ¥é‡æ–°æ’åº CPU åˆ†æå™¨ä¸­çš„ç±»åˆ«ã€‚</p><p><img src="/assets/cpu_profiler-C6WyDErJ.png" alt=""></p><p>UI ç±»åˆ«æ˜¯ Unity 2017.1 åŠæ›´é«˜ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒUI æ›´æ–°è¿‡ç¨‹çš„éƒ¨åˆ†å†…å®¹æ²¡æœ‰æ­£ç¡®åˆ†ç±»ï¼Œå› æ­¤åœ¨æŸ¥çœ‹ UI æ›²çº¿æ—¶è¦å°å¿ƒï¼Œå› ä¸ºå®ƒå¯èƒ½ä¸åŒ…å«æ‰€æœ‰ UI ç›¸å…³è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>Canvas.SendWillRenderCanvases</code> è¢«å½’ç±»ä¸º <code>UI</code>ï¼Œä½† <code>Canvas.BuildBatch</code> è¢«å½’ç±»ä¸º <code>Others</code> å’Œ <code>Rendering</code>ã€‚</p><p>åœ¨ 2017.1 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–°çš„ <a href="https://docs.unity3d.com/2021.3/Documentation/Manual/ProfilerUI.html" target="_blank" rel="noopener noreferrer">UI Profiler</a>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤åˆ†æå™¨æ˜¯ Profiler çª—å£ä¸­çš„æœ€åä¸€ä¸ªã€‚å®ƒç”±ä¸¤ä¸ªæ—¶é—´çº¿å’Œä¸€ä¸ªæ‰¹å¤„ç†æŸ¥çœ‹å™¨ç»„æˆï¼š</p><p><img src="/assets/ui_profiler-DwNxa_gi.png" alt=""></p><p>ç¬¬ä¸€ä¸ªæ—¶é—´çº¿æ˜¾ç¤ºåœ¨ä¸¤ä¸ªç±»åˆ«ä¸­èŠ±è´¹çš„ CPU æ—¶é—´ï¼Œåˆ†åˆ«æ˜¯è®¡ç®—å¸ƒå±€å’Œæ¸²æŸ“ã€‚è¯·æ³¨æ„ï¼Œå®ƒå­˜åœ¨ä¸å‰é¢æè¿°çš„ç›¸åŒçš„é—®é¢˜ï¼Œä¸€äº› UI åŠŸèƒ½å¯èƒ½æœªè¢«è®¡å…¥ã€‚</p><p>ç¬¬äºŒä¸ªæ—¶é—´çº¿æ˜¾ç¤ºæ‰¹å¤„ç†ã€é¡¶ç‚¹çš„æ€»æ•°ï¼Œå¹¶æ˜¾ç¤ºäº‹ä»¶æ ‡è®°ã€‚åœ¨å‰é¢çš„å±å¹•æˆªå›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å‡ ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶ã€‚è¿™äº›æ ‡è®°å¯ä»¥å¸®åŠ©æ‚¨ç¡®å®šå¯¼è‡´ CPU å³°å€¼çš„åŸå› ã€‚</p><p>æœ€åï¼ŒUI Profiler æœ€æœ‰ç”¨çš„åŠŸèƒ½æ˜¯åº•éƒ¨çš„æ‰¹å¤„ç†æŸ¥çœ‹å™¨ã€‚å·¦ä¾§æ˜¯æ‰€æœ‰ Canvas çš„æ ‘è§†å›¾ï¼Œæ¯ä¸ª Canvas ä¸‹é¢æ˜¯ç”±å®ƒä»¬ç”Ÿæˆçš„æ‰¹å¤„ç†åˆ—è¡¨ã€‚åˆ—æä¾›äº†æœ‰å…³æ¯ä¸ª Canvas æˆ–æ‰¹å¤„ç†çš„æœ‰è¶£ç»†èŠ‚ï¼Œä½†æœ‰ä¸€ä¸ªç‰¹åˆ«å…³é”®ï¼Œå¯ä»¥æ›´å¥½åœ°ç†è§£å¦‚ä½•ä¼˜åŒ– UIï¼Œé‚£å°±æ˜¯ <code>Batch Breaking Reason</code>ã€‚</p><p>æ­¤åˆ—å°†æ˜¾ç¤ºä¸ºä»€ä¹ˆæ‰€é€‰æ‰¹å¤„ç†æ— æ³•ä¸å‰ä¸€ä¸ªæ‰¹å¤„ç†åˆå¹¶ã€‚å‡å°‘æ‰¹å¤„ç†æ•°é‡æ˜¯æé«˜ UI æ€§èƒ½çš„æœ€æœ‰æ•ˆæ–¹æ³•ä¹‹ä¸€ï¼Œå› æ­¤äº†è§£ä»€ä¹ˆä¼šç ´åæ‰¹å¤„ç†éå¸¸é‡è¦ã€‚</p><p>å¦‚å±å¹•æˆªå›¾æ‰€ç¤ºï¼Œæœ€å¸¸è§çš„åŸå› ä¹‹ä¸€æ˜¯ UI å…ƒç´ ä½¿ç”¨ä¸åŒçš„çº¹ç†æˆ–æè´¨ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ <a href="https://docs.unity3d.com/Manual/class-SpriteAtlas.html" target="_blank" rel="noopener noreferrer">sprite atlases</a> è½»æ¾ä¿®å¤ã€‚æœ€åä¸€åˆ—æ˜¾ç¤ºä¸æ‰¹å¤„ç†å…³è”çš„æ¸¸æˆå¯¹è±¡åç§°ã€‚æ‚¨å¯ä»¥åŒå‡»åç§°ä»¥åœ¨ç¼–è¾‘å™¨ä¸­é€‰æ‹©æ¸¸æˆå¯¹è±¡ï¼ˆå½“æ‚¨æœ‰å‡ ä¸ªåŒåå¯¹è±¡æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ï¼‰ã€‚</p><p>æˆªè‡³ Unity 2017.3ï¼Œæ‰¹å¤„ç†æŸ¥çœ‹å™¨ä»…åœ¨ç¼–è¾‘å™¨ä¸­å·¥ä½œã€‚æ‰¹å¤„ç†åœ¨è®¾å¤‡ä¸Šé€šå¸¸åº”è¯¥ç›¸åŒï¼Œå› æ­¤è¿™ä»ç„¶éå¸¸æœ‰ç”¨ã€‚å¦‚æœæ‚¨æ€€ç–‘è®¾å¤‡ä¸Šçš„æ‰¹å¤„ç†å¯èƒ½ä¸åŒï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ¥ä¸‹æ¥æè¿°çš„ Frame Debuggerã€‚</p><h3 id="unity-frame-debugger" tabindex="-1"><a class="header-anchor" href="#unity-frame-debugger"><span>Unity Frame Debugger</span></a></h3><p><code>Unity Frame Debugger</code> æ˜¯å‡å°‘ Unity UI ç”Ÿæˆçš„ç»˜åˆ¶è°ƒç”¨æ•°é‡çš„æœ‰ç”¨å·¥å…·ã€‚è¿™ä¸ªå†…ç½®å·¥å…·å¯ä»¥é€šè¿‡ Unity Editor ä¸­çš„ Window èœå•è®¿é—®ã€‚å¯ç”¨åï¼Œå®ƒå°†æ˜¾ç¤º Unity ç”Ÿæˆçš„æ‰€æœ‰ç»˜åˆ¶è°ƒç”¨ï¼ŒåŒ…æ‹¬ Unity UI ç”Ÿæˆçš„ç»˜åˆ¶è°ƒç”¨ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¸§è°ƒè¯•å™¨å°†ä½¿ç”¨ä¸º Unity Editor ä¸­çš„ Game View ç”Ÿæˆçš„ç»˜åˆ¶è°ƒç”¨æ›´æ–°è‡ªèº«ï¼Œå› æ­¤å¯ä»¥ç”¨äºå°è¯•ä¸åŒçš„ UI é…ç½®ï¼Œç”šè‡³æ— éœ€è¿›å…¥ Play æ¨¡å¼ã€‚</p><p>Unity UI ç»˜åˆ¶è°ƒç”¨çš„ä½ç½®å–å†³äºæ­£åœ¨ç»˜åˆ¶çš„ Canvas ç»„ä»¶ä¸Šé€‰æ‹©çš„ <code>Render Mode</code>ï¼š</p><ul><li><code>Screen Space - Overlay</code> å°†å‡ºç°åœ¨ <code>Canvas.RenderOverlays</code> ç»„ä¸­</li><li><code>Screen Space - Camera</code> å°†å‡ºç°åœ¨æ‰€é€‰ <code>Render Camera</code> çš„ <code>Camera.Render</code> ç»„ä¸­ï¼Œä½œä¸º <code>Render.TransparentGeometry</code> çš„å­ç»„</li><li><code>World Space</code> å°†ä½œä¸º <code>Render.TransparentGeometry</code> çš„å­ç»„å‡ºç°åœ¨ <code>Canvas</code> å¯è§çš„æ¯ä¸ª <code>World Space</code> ç›¸æœºä¸­</li></ul><p>æ‰€æœ‰ UI éƒ½å¯ä»¥é€šè¿‡ <code>Shader: UI/Default</code> è¡Œè¯†åˆ«ï¼ˆå‡è®¾ UI ç€è‰²å™¨å°šæœªè¢«è‡ªå®šä¹‰ç€è‰²å™¨æ›¿æ¢ï¼‰ã€‚åœ¨ç»„æˆ–ç»˜åˆ¶è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯ä¸­ã€‚è¯·å‚é˜…ä¸‹é¢å±å¹•æˆªå›¾ä¸­çš„çº¢è‰²é«˜äº®æ¡†ã€‚</p><p><img src="/assets/framedebugger-Cx_04MMi.png" alt=""></p><p>åœ¨è°ƒæ•´ UI æ—¶è§‚å¯Ÿè¿™ç»„è¡Œï¼Œå¯ä»¥ç›¸å¯¹ç®€å•åœ°æœ€å¤§åŒ– Canvas å°† UI å…ƒç´ ç»„åˆæˆæ‰¹å¤„ç†çš„èƒ½åŠ›ã€‚ç ´åæ‰¹å¤„ç†çš„æœ€å¸¸è§è®¾è®¡ç›¸å…³åŸå› æ˜¯æ„å¤–é‡å ã€‚</p><p>æ‰€æœ‰ Unity UI ç»„ä»¶å°†å…¶å‡ ä½•ä½“ç”Ÿæˆä¸ºä¸€ç³»åˆ—å››è¾¹å½¢ã€‚ç„¶è€Œï¼Œè®¸å¤š UI ç²¾çµæˆ– UI æ–‡æœ¬å­—å½¢ä»…å ç”¨ç”¨äºè¡¨ç¤ºå®ƒä»¬çš„å››è¾¹å½¢çš„ä¸€å°éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†ä¸ºç©ºã€‚å› æ­¤ï¼Œå¾ˆå¸¸è§çš„æ˜¯å‘ç° UI çš„è®¾è®¡è€…æ— æ„ä¸­é‡å äº†å¤šä¸ªä¸åŒçš„å››è¾¹å½¢ï¼Œè¿™äº›å››è¾¹å½¢çš„çº¹ç†æ¥è‡ªä¸åŒçš„æè´¨ï¼Œå› æ­¤æ— æ³•æ‰¹å¤„ç†ã€‚</p><p>ç”±äº Unity UI å®Œå…¨åœ¨é€æ˜é˜Ÿåˆ—ä¸­æ“ä½œï¼Œä»»ä½•è¦†ç›–åœ¨ä¸å¯æ‰¹å¤„ç†çš„å››è¾¹å½¢ä¸Šçš„å››è¾¹å½¢å¿…é¡»åœ¨ä¸å¯æ‰¹å¤„ç†çš„å››è¾¹å½¢ä¹‹å‰ç»˜åˆ¶ï¼Œå› æ­¤ä¸èƒ½ä¸æ”¾ç½®åœ¨ä¸å¯æ‰¹å¤„ç†çš„å››è¾¹å½¢ä¹‹ä¸Šçš„å…¶ä»–å››è¾¹å½¢æ‰¹å¤„ç†ã€‚</p><p>è€ƒè™‘ä¸‰ä¸ªå››è¾¹å½¢ Aã€B å’Œ C çš„æƒ…å†µã€‚å‡è®¾æ‰€æœ‰ä¸‰ä¸ªå››è¾¹å½¢ç›¸äº’é‡å ï¼Œå¹¶ä¸”è¿˜å‡è®¾å››è¾¹å½¢ A å’Œ C ä½¿ç”¨ç›¸åŒçš„æè´¨ï¼Œè€Œå››è¾¹å½¢ B ä½¿ç”¨å•ç‹¬çš„æè´¨ã€‚å› æ­¤ï¼Œå››è¾¹å½¢ B ä¸èƒ½ä¸ A æˆ– C æ‰¹å¤„ç†ã€‚</p><p>å¦‚æœå±‚æ¬¡ç»“æ„ä¸­çš„é¡ºåºï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰æ˜¯ Aã€Bã€Cï¼Œåˆ™ A å’Œ C ä¸èƒ½æ‰¹å¤„ç†ï¼Œå› ä¸º B å¿…é¡»ç»˜åˆ¶åœ¨ A ä¹‹ä¸Šå’Œ C ä¹‹ä¸‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœ B æ”¾ç½®åœ¨å¯æ‰¹å¤„ç†çš„å››è¾¹å½¢ä¹‹å‰æˆ–ä¹‹åï¼Œåˆ™å¯æ‰¹å¤„ç†çš„å››è¾¹å½¢å®é™…ä¸Šå¯ä»¥æ‰¹å¤„ç† - B åªéœ€è¦åœ¨æ‰¹å¤„ç†çš„å››è¾¹å½¢ä¹‹å‰æˆ–ä¹‹åç»˜åˆ¶ï¼Œè€Œä¸æ˜¯æ’å…¥å®ƒä»¬ä¹‹é—´ã€‚</p><p>æœ‰å…³æ­¤é—®é¢˜çš„è¿›ä¸€æ­¥è®¨è®ºï¼Œè¯·å‚é˜… <a href="#child-%E9%A1%BA%E5%BA%8F">Canvas æ­¥éª¤ä¸­çš„ Child é¡ºåº</a> éƒ¨åˆ†ã€‚</p><h3 id="instruments-vtune" tabindex="-1"><a class="header-anchor" href="#instruments-vtune"><span>Instruments &amp; VTune</span></a></h3><p>Xcode çš„ Instruments å’Œ Intel çš„ VTune å…è®¸åœ¨ Apple æˆ– Intel CPU ä¸Šå¯¹ Unity UI é‡å»ºå’Œ Canvas æ‰¹å¤„ç†è®¡ç®—è¿›è¡Œææ·±å…¥çš„åˆ†æã€‚æ–¹æ³•åç§°ä¸ä¸Šé¢ Unity Profiler éƒ¨åˆ†è®¨è®ºçš„åˆ†æå™¨æ ‡ç­¾å‡ ä¹ç›¸åŒï¼š</p><ul><li><code>Canvas::SendWillRenderCanvases</code> æ˜¯è°ƒç”¨ <code>Canvas.SendWillRenderCanvases</code> C# æ–¹æ³•çš„ C++ çˆ¶çº§ï¼Œå¹¶æ§åˆ¶ Unity Profiler ä¸­çš„è¯¥è¡Œã€‚å®ƒå°†åŒ…å«ç”¨äºè¿è¡Œé‡å»ºè¿‡ç¨‹çš„ä»£ç ï¼Œå¦‚å‰é¢çš„æ­¥éª¤æ‰€è¿°ã€‚</li><li><code>Canvas::UpdateBatches</code> ä¸ <code>Canvas.BuildBatch</code> ç›¸åŒï¼Œä½†åŒ…æ‹¬ Unity Profiler æ ‡ç­¾æœªæ¶µç›–çš„é¢å¤–æ ·æ¿ä»£ç ã€‚å®ƒè¿è¡Œå®é™…çš„ Canvas æ‰¹å¤„ç†æ„å»ºè¿‡ç¨‹ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚</li></ul><p>å½“ä¸é€šè¿‡ IL2CPP æ„å»ºçš„ Unity åº”ç”¨ç¨‹åºä¸€èµ·ä½¿ç”¨æ—¶ï¼Œè¿™äº›å·¥å…·å¯ç”¨äºæ›´æ·±å…¥åœ°ç ”ç©¶ <code>Canvas::SendWillRenderCanvases</code> çš„è½¬è¯‘ C# ä»£ç ã€‚ä¸»è¦å…³æ³¨ä»¥ä¸‹æ–¹æ³•çš„æˆæœ¬ã€‚ï¼ˆæ³¨æ„ï¼šè½¬è¯‘çš„æ–¹æ³•åç§°æ˜¯è¿‘ä¼¼çš„ã€‚ï¼‰</p><ul><li><code>IndexedSet_Sort</code> å’Œ <code>CanvasUpdateRegistry_SortLayoutList</code> ç”¨äºåœ¨é‡æ–°è®¡ç®—å¸ƒå±€ä¹‹å‰å¯¹è„çš„ Layout ç»„ä»¶åˆ—è¡¨è¿›è¡Œæ’åºã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™æ¶‰åŠè®¡ç®—æ¯ä¸ª Layout ç»„ä»¶ä¸Šæ–¹çš„çˆ¶ Transform æ•°é‡ã€‚</li><li><code>ClipperRegistry_Cull</code> è°ƒç”¨ <code>IClipRegion</code> æ¥å£çš„æ‰€æœ‰å·²æ³¨å†Œå®ç°è€…ã€‚å†…ç½®å®ç°è€…åŒ…æ‹¬ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.RectMask2D.html" target="_blank" rel="noopener noreferrer">RectMask2D</a>ï¼Œå®ƒä½¿ç”¨ <code>IClippable</code> æ¥å£ã€‚åœ¨ <code>ClipperRegistry.Cull</code> è°ƒç”¨æœŸé—´ï¼ŒRectMask2D ç»„ä»¶å¾ªç¯éå†å…¶å±‚æ¬¡ç»“æ„ä¸­åŒ…å«çš„æ‰€æœ‰å¯å‰ªè£å…ƒç´ ï¼Œå¹¶è¦æ±‚å®ƒä»¬æ›´æ–°å…¶å‰ªè£ä¿¡æ¯ã€‚</li><li><code>Graphic_Rebuild</code> å°†åŒ…å«å®é™…è®¡ç®—è¡¨ç¤º Imageã€Text æˆ–å…¶ä»– Graphic æ´¾ç”Ÿç»„ä»¶æ‰€éœ€çš„ç½‘æ ¼çš„æˆæœ¬ã€‚åœ¨æ­¤ä¹‹ä¸‹è¿˜æœ‰å…¶ä»–å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚ <code>Graphic_UpdateGeometry</code>ï¼Œæœ€å€¼å¾—æ³¨æ„çš„æ˜¯ <code>Text_OnPopulateMesh</code>ã€‚</li><li>å½“å¯ç”¨ Best Fit æ—¶ï¼Œ<code>Text_OnPopulateMesh</code> é€šå¸¸æ˜¯ä¸€ä¸ªçƒ­ç‚¹ã€‚æœ¬æŒ‡å—åé¢å°†æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸€ç‚¹ã€‚</li><li>ç½‘æ ¼ä¿®æ”¹å™¨ï¼Œå¦‚ <code>Shadow_ModifyMesh</code> å’Œ <code>Outline_ModifyMesh</code>ï¼Œä¹Ÿå°†åœ¨æ­¤è¿è¡Œã€‚è®¡ç®—ç»„ä»¶æŠ•å½±ã€è½®å»“å’Œå…¶ä»–ç‰¹æ®Šæ•ˆæœçš„æˆæœ¬å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•çœ‹åˆ°ã€‚</li></ul><h3 id="xcode-frame-debugger-intel-gpa" tabindex="-1"><a class="header-anchor" href="#xcode-frame-debugger-intel-gpa"><span>Xcode Frame Debugger &amp; Intel GPA</span></a></h3><p>ä½çº§å¸§è°ƒè¯•å·¥å…·å¯¹äºåˆ†ææ‰¹å¤„ç† UI çš„å„ä¸ªéƒ¨åˆ†çš„æˆæœ¬ä»¥åŠç›‘è§† UI è¿‡åº¦ç»˜åˆ¶çš„æˆæœ¬è‡³å…³é‡è¦ã€‚UI è¿‡åº¦ç»˜åˆ¶å°†åœ¨æœ¬æŒ‡å—åé¢æ›´è¯¦ç»†åœ°è®¨è®ºã€‚</p><p><strong>ä½¿ç”¨ Xcode Frame Debugger</strong></p><p>è¦æµ‹è¯•ç»™å®š UI æ˜¯å¦è¿‡åº¦å‹åŠ› GPUï¼Œå¯ä»¥ä½¿ç”¨ Xcode çš„å†…ç½® GPU è¯Šæ–­å·¥å…·ã€‚é¦–å…ˆï¼Œå°†ç›¸å…³é¡¹ç›®é…ç½®ä¸ºä½¿ç”¨ Metal æˆ– OpenGLES3ï¼Œç„¶åè¿›è¡Œæ„å»ºå¹¶æ‰“å¼€ç”Ÿæˆçš„ Xcode é¡¹ç›®ã€‚æŸäº› Xcode ç‰ˆæœ¬å’Œè®¾å¤‡ç»„åˆå¯èƒ½æ”¯æŒ OpenGLES 2 å¸§æ•è·ï¼Œä½†ä¸èƒ½ä¿è¯å®ƒä¼šå·¥ä½œã€‚</p><p>æ³¨æ„ï¼šåœ¨æŸäº›ç‰ˆæœ¬çš„ Xcode ä¸Šï¼Œä¸ºäº†ä½¿å›¾å½¢åˆ†æå™¨å·¥ä½œï¼Œå¿…é¡»åœ¨ Build Scheme ä¸­é€‰æ‹©é€‚å½“çš„å›¾å½¢ APIã€‚ä¸ºæ­¤ï¼Œè¯·è½¬åˆ° Xcode ä¸­çš„ Product èœå•ï¼Œå±•å¼€ Scheme èœå•é¡¹ï¼Œç„¶åé€‰æ‹© <code>Edit Scheme...</code>ã€‚é€‰æ‹© Run ç›®æ ‡å¹¶è½¬åˆ° Options é€‰é¡¹å¡ã€‚å°† GPU Frame Capture é€‰é¡¹æ›´æ”¹ä¸ºä¸é¡¹ç›®ä½¿ç”¨çš„ API åŒ¹é…ã€‚å‡è®¾ Unity é¡¹ç›®è®¾ç½®ä¸ºè‡ªåŠ¨é€‰æ‹©å›¾å½¢ APIï¼Œé‚£ä¹ˆå¤§å¤šæ•°ç°ä»£ iPad å°†é»˜è®¤ä½¿ç”¨ Metalã€‚å¦‚æœæœ‰ç–‘é—®ï¼Œè¯·å¯åŠ¨é¡¹ç›®å¹¶æŸ¥çœ‹ Xcode ä¸­çš„è°ƒè¯•æ—¥å¿—ã€‚æ—©æœŸçš„ä¸€è¡Œåº”æŒ‡ç¤ºæ­£åœ¨åˆå§‹åŒ–å“ªä¸ªæ¸²æŸ“è·¯å¾„ï¼ˆMetalã€GLES3 æˆ– GLES2ï¼‰ã€‚</p><p>åœ¨ iOS è®¾å¤‡ä¸Šæ„å»ºå¹¶è¿è¡Œé¡¹ç›®ã€‚å¯ä»¥é€šè¿‡åœ¨ Xcode çš„ Navigator ä¾§è¾¹æ ä¸­æ˜¾ç¤º Debug çª—æ ¼å¹¶å•å‡» FPS æ¡ç›®æ¥æ‰¾åˆ° GPU åˆ†æå™¨ã€‚</p><p><img src="/assets/xcode_gpu-CvwJ2ypE.png" alt=""></p><p>GPU åˆ†æå™¨ä¸­ç¬¬ä¸€ä¸ªæ„Ÿå…´è¶£çš„ç‚¹æ˜¯å±å¹•ä¸­å¿ƒçš„ä¸‰ä¸ªæ¡å½¢å›¾ï¼Œæ ‡è®°ä¸º <code>Tiler</code>ã€<code>Renderer</code> å’Œ <code>Device</code>ã€‚å…¶ä¸­ä¸¤ä¸ªï¼š</p><ul><li><code>Tiler</code> é€šå¸¸æ˜¯ GPU å¤„ç†å‡ ä½•ä½“çš„å‹åŠ›åº¦é‡ï¼ŒåŒ…æ‹¬åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­èŠ±è´¹çš„æ—¶é—´ã€‚é€šå¸¸ï¼Œé«˜ <code>Tiler</code> ä½¿ç”¨ç‡è¡¨ç¤ºé¡¶ç‚¹ç€è‰²å™¨è¿‡æ…¢æˆ–ç»˜åˆ¶çš„é¡¶ç‚¹æ•°é‡è¿‡å¤šã€‚</li><li><code>Renderer</code> é€šå¸¸æ˜¯ GPU åƒç´ ç®¡é“çš„å‹åŠ›åº¦é‡ã€‚é€šå¸¸ï¼Œé«˜ <code>Renderer</code> ä½¿ç”¨ç‡è¡¨ç¤ºåº”ç”¨ç¨‹åºè¶…è¿‡äº† GPU çš„æœ€å¤§å¡«å……ç‡ï¼Œæˆ–è€…å…·æœ‰ä½æ•ˆçš„ç‰‡æ®µç€è‰²å™¨ã€‚</li><li><code>Device</code> æ˜¯æ•´ä½“ GPU ä½¿ç”¨ç‡çš„ç»¼åˆåº¦é‡ï¼ŒåŒ…æ‹¬ <code>Tiler</code> å’Œ <code>Renderer</code> æ€§èƒ½ã€‚é€šå¸¸å¯ä»¥å¿½ç•¥å®ƒï¼Œå› ä¸ºå®ƒå¤§è‡´è·Ÿè¸ª <code>Tiler</code> æˆ– <code>Renderer</code> æµ‹é‡å€¼ä¸­çš„è¾ƒé«˜è€…ã€‚</li></ul><p>Xcode çš„ Frame Debugger å¯ä»¥é€šè¿‡å•å‡» GPU åˆ†æå™¨åº•éƒ¨éšè—çš„å° <code>Camera</code> å›¾æ ‡è§¦å‘ã€‚åœ¨ä»¥ä¸‹å±å¹•æˆªå›¾ä¸­ï¼Œå®ƒè¢«ç®­å¤´å’Œçº¢è‰²æ¡†çªå‡ºæ˜¾ç¤ºã€‚</p><p><img src="/assets/gpucapture-DSgrqdIN.png" alt=""></p><p>çŸ­æš‚æš‚åœåï¼ŒFrame Debugger çš„æ‘˜è¦è§†å›¾åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/assets/gpusummary-BPhejtWc.png" alt=""></p><p>å½“ä½¿ç”¨é»˜è®¤ UI ç€è‰²å™¨æ—¶ï¼Œç”± Unity UI ç³»ç»Ÿç”Ÿæˆçš„å‡ ä½•ä½“çš„æ¸²æŸ“æˆæœ¬å°†æ˜¾ç¤ºåœ¨ <code>UI/Default</code> ç€è‰²å™¨é€šé“ä¸‹ï¼Œå‡è®¾é»˜è®¤ UI ç€è‰²å™¨å°šæœªè¢«è‡ªå®šä¹‰ç€è‰²å™¨æ›¿æ¢ã€‚åœ¨ä¸Šé¢çš„å±å¹•æˆªå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ­¤é»˜è®¤ UI ç€è‰²å™¨ä½œä¸º Render Pipeline <code>UI/Default</code>ã€‚</p><p>Unity UI ä»…ç”Ÿæˆå››è¾¹å½¢ï¼Œå› æ­¤é¡¶ç‚¹ç€è‰²å™¨ä¸å¤ªå¯èƒ½ç»™ GPU çš„ tiler ç®¡é“å¸¦æ¥å‹åŠ›ã€‚å‡ºç°åœ¨æ­¤ç€è‰²å™¨é€šé“ä¸­çš„ä»»ä½•é—®é¢˜å¯èƒ½æ˜¯ç”±äºå¡«å……ç‡é—®é¢˜ã€‚</p><h3 id="åˆ†æåˆ†æå™¨-profiler-ç»“æœ" tabindex="-1"><a class="header-anchor" href="#åˆ†æåˆ†æå™¨-profiler-ç»“æœ"><span>åˆ†æåˆ†æå™¨(profiler)ç»“æœ</span></a></h3><p>æ”¶é›†åˆ†ææ•°æ®åï¼Œå¯èƒ½ä¼šå¾—å‡ºå‡ ä¸ªç»“è®ºã€‚å¦‚æœ <code>Canvas.BuildBatch</code> æˆ– <code>Canvas::UpdateBatches</code> ä¼¼ä¹ä½¿ç”¨äº†è¿‡å¤šçš„ CPU æ—¶é—´ï¼Œé‚£ä¹ˆå¯èƒ½çš„é—®é¢˜æ˜¯åœ¨å•ä¸ª Canvas ä¸Šæœ‰è¿‡å¤šçš„ Canvas Renderer ç»„ä»¶ã€‚è¯·å‚é˜… <a href="#%E6%8B%86%E5%88%86-canvas">Canvas æ­¥éª¤ä¸­çš„æ‹†åˆ† Canvas</a> éƒ¨åˆ†ã€‚</p><p>å¦‚æœ GPU ä¸Šç»˜åˆ¶ UI èŠ±è´¹äº†è¿‡å¤šæ—¶é—´ï¼Œå¹¶ä¸”å¸§è°ƒè¯•å™¨æ˜¾ç¤ºç‰‡æ®µç€è‰²å™¨ç®¡é“æ˜¯ç“¶é¢ˆï¼Œé‚£ä¹ˆ UI å¯èƒ½è¶…è¿‡äº† GPU çš„åƒç´ å¡«å……ç‡ã€‚æœ€å¯èƒ½çš„åŸå› æ˜¯ UI è¿‡åº¦ç»˜åˆ¶ã€‚è¯·å‚é˜… <a href="#%E4%BF%AE%E5%A4%8D%E5%A1%AB%E5%85%85%E7%8E%87%E9%97%AE%E9%A2%98">å¡«å……ç‡ã€Canvas å’Œè¾“å…¥æ­¥éª¤ä¸­çš„ä¿®å¤å¡«å……ç‡é—®é¢˜</a> éƒ¨åˆ†ã€‚</p><p>å¦‚æœ Graphic é‡å»ºä½¿ç”¨äº†è¿‡å¤šçš„ CPUï¼Œå¦‚ <code>Canvas.SendWillRenderCanvases</code> æˆ– <code>Canvas::SendWillRenderCanvases</code> å ç”¨äº†å¤§é‡ CPU æ—¶é—´ï¼Œåˆ™éœ€è¦æ›´æ·±å…¥çš„åˆ†æã€‚Graphic é‡å»ºè¿‡ç¨‹çš„æŸäº›éƒ¨åˆ†å¯èƒ½æ˜¯åŸå› ã€‚</p><p>å¦‚æœåœ¨ <code>WillRenderCanvas</code> ä¸­å¤§éƒ¨åˆ†æ—¶é—´èŠ±è´¹åœ¨ <code>IndexedSet_Sort</code> æˆ– <code>CanvasUpdateRegistry_SortLayoutList</code> ä¸­ï¼Œåˆ™æ—¶é—´ç”¨äºå¯¹è„çš„ Layout ç»„ä»¶åˆ—è¡¨è¿›è¡Œæ’åºã€‚è€ƒè™‘å‡å°‘ Canvas ä¸Šçš„ Layout ç»„ä»¶æ•°é‡ã€‚è¯·å‚é˜… <a href="#%E5%9F%BA%E4%BA%8E-recttransform-%E7%9A%84%E5%B8%83%E5%B1%80">ç”¨ RectTransforms æ›¿æ¢ Layout</a> å’Œ <a href="#%E6%8B%86%E5%88%86-canvas">æ‹†åˆ† Canvas</a> éƒ¨åˆ†ä»¥è·å–å¯èƒ½çš„ä¿®å¤æ–¹æ³•ã€‚</p><p>å¦‚æœ <code>Text_OnPopulateMesh</code> ä¼¼ä¹å ç”¨äº†è¿‡å¤šæ—¶é—´ï¼Œåˆ™é—®é¢˜åªæ˜¯æ–‡æœ¬ç½‘æ ¼çš„ç”Ÿæˆã€‚è¯·å‚é˜… <code>Best Fit</code> å’Œ <a href="#%E7%A6%81%E7%94%A8-canvas">ç¦ç”¨ Canvas</a> éƒ¨åˆ†ä»¥è·å–å¯èƒ½çš„ä¿®å¤æ–¹æ³•ï¼Œå¦‚æœå¤§éƒ¨åˆ†è¢«é‡å»ºçš„æ–‡æœ¬å®é™…ä¸Šæ²¡æœ‰æ›´æ”¹å…¶åº•å±‚å­—ç¬¦ä¸²æ•°æ®ï¼Œè¯·è€ƒè™‘æ‹†åˆ† Canvas ä¸­çš„å»ºè®®ã€‚</p><p>å¦‚æœæ—¶é—´èŠ±è´¹åœ¨ <code>Shadow_ModifyMesh</code> æˆ– <code>Outline_ModifyMesh</code>ï¼ˆæˆ–ä»»ä½•å…¶ä»– <code>ModifyMesh</code> çš„å®ç°ï¼‰ä¸­ï¼Œåˆ™é—®é¢˜æ˜¯è®¡ç®—ç½‘æ ¼ä¿®æ”¹å™¨èŠ±è´¹äº†è¿‡å¤šæ—¶é—´ã€‚è€ƒè™‘ç§»é™¤è¿™äº›ç»„ä»¶å¹¶é€šè¿‡é™æ€å›¾åƒå®ç°å…¶è§†è§‰æ•ˆæœã€‚</p><p>å¦‚æœåœ¨ <code>Canvas.SendWillRenderCanvases</code> ä¸­æ²¡æœ‰ç‰¹å®šçš„çƒ­ç‚¹ï¼Œæˆ–è€…å®ƒä¼¼ä¹æ¯å¸§éƒ½åœ¨è¿è¡Œï¼Œåˆ™é—®é¢˜å¯èƒ½æ˜¯åŠ¨æ€å…ƒç´ ä¸é™æ€å…ƒç´ åˆ†ç»„åœ¨ä¸€èµ·ï¼Œå¹¶å¼ºåˆ¶æ•´ä¸ª Canvas è¿‡äºé¢‘ç¹åœ°é‡å»ºã€‚è¯·å‚é˜…<a href="#%E6%8B%86%E5%88%86-canvas">æ‹†åˆ† Canvas</a> æ­¥éª¤ã€‚</p><h2 id="_4-å¡«å……ç‡-canvas-å’Œè¾“å…¥" tabindex="-1"><a class="header-anchor" href="#_4-å¡«å……ç‡-canvas-å’Œè¾“å…¥"><span>4. å¡«å……ç‡ Canvas å’Œè¾“å…¥</span></a></h2><p>æœ¬ç« è®¨è®ºæ„å»º Unity UI çš„æ›´å¹¿æ³›é—®é¢˜ã€‚</p><h3 id="ä¿®å¤å¡«å……ç‡é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#ä¿®å¤å¡«å……ç‡é—®é¢˜"><span>ä¿®å¤å¡«å……ç‡é—®é¢˜</span></a></h3><p>å¯ä»¥é‡‡å–ä¸¤ç§æªæ–½æ¥å‡å°‘ GPU ç‰‡æ®µç®¡é“çš„å‹åŠ›ï¼š</p><ul><li>é™ä½ç‰‡æ®µç€è‰²å™¨çš„å¤æ‚æ€§ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="#ui-%E7%9D%80%E8%89%B2%E5%99%A8%E5%92%8C%E4%BD%8E%E8%A7%84%E6%A0%BC%E8%AE%BE%E5%A4%87">UI ç€è‰²å™¨å’Œä½è§„æ ¼è®¾å¤‡</a> éƒ¨åˆ†ã€‚</li><li>å‡å°‘å¿…é¡»é‡‡æ ·çš„åƒç´ æ•°é‡ã€‚</li></ul><p>ç”±äº UI ç€è‰²å™¨é€šå¸¸æ˜¯æ ‡å‡†åŒ–çš„ï¼Œæœ€å¸¸è§çš„é—®é¢˜åªæ˜¯å¡«å……ç‡ä½¿ç”¨è¿‡åº¦ã€‚è¿™é€šå¸¸æ˜¯ç”±äºå¤§é‡é‡å çš„ UI å…ƒç´ å’Œ/æˆ–æœ‰å¤šä¸ªå æ®å±å¹•é‡è¦éƒ¨åˆ†çš„ UI å…ƒç´ ã€‚è¿™ä¸¤ä¸ªé—®é¢˜éƒ½å¯èƒ½å¯¼è‡´æé«˜çš„è¿‡åº¦ç»˜åˆ¶æ°´å¹³ã€‚</p><p>ä¸ºäº†ç¼“è§£å¡«å……ç‡è¿‡åº¦ä½¿ç”¨å¹¶å‡å°‘è¿‡åº¦ç»˜åˆ¶ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å¯èƒ½çš„ä¿®å¤æ–¹æ³•ã€‚</p><h4 id="æ¶ˆé™¤ä¸å¯è§-ui" tabindex="-1"><a class="header-anchor" href="#æ¶ˆé™¤ä¸å¯è§-ui"><span>æ¶ˆé™¤ä¸å¯è§ UI</span></a></h4><p>éœ€è¦æœ€å°‘é‡æ–°è®¾è®¡ç°æœ‰ UI å…ƒç´ çš„æ–¹æ³•æ˜¯ç®€å•åœ°ç¦ç”¨å¯¹ç©å®¶ä¸å¯è§çš„å…ƒç´ ã€‚è¿™ç§æƒ…å†µæœ€å¸¸è§çš„åº”ç”¨æ˜¯æ‰“å¼€å…·æœ‰ä¸é€æ˜èƒŒæ™¯çš„å…¨å± UIã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç¦ç”¨æ”¾ç½®åœ¨å…¨å± UI ä¸‹æ–¹çš„ä»»ä½• UI å…ƒç´ ã€‚</p><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¦ç”¨åŒ…å«ä¸å¯è§ UI å…ƒç´ çš„æ ¹ GameObject æˆ– GameObjectsã€‚æœ‰å…³æ›¿ä»£è§£å†³æ–¹æ¡ˆï¼Œè¯·å‚é˜… <a href="#%E7%A6%81%E7%94%A8-canvas">ç¦ç”¨ Canvas</a> éƒ¨åˆ†ã€‚</p><p>æœ€åï¼Œç¡®ä¿æ²¡æœ‰é€šè¿‡å°†å…¶ alpha è®¾ç½®ä¸º 0 æ¥éšè— UI å…ƒç´ ï¼Œå› ä¸ºè¯¥å…ƒç´ ä»å°†è¢«å‘é€åˆ° GPU å¹¶å¯èƒ½å ç”¨å®è´µçš„æ¸²æŸ“æ—¶é—´ã€‚å¦‚æœ UI å…ƒç´ ä¸éœ€è¦ Graphic ç»„ä»¶ï¼Œå¯ä»¥ç®€å•åœ°ç§»é™¤å®ƒï¼Œå°„çº¿æ£€æµ‹ä»å°†å·¥ä½œã€‚</p><h4 id="ç®€åŒ–-ui-ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç®€åŒ–-ui-ç»“æ„"><span>ç®€åŒ– UI ç»“æ„</span></a></h4><p>ä¸ºäº†å‡å°‘é‡å»ºå’Œæ¸²æŸ“ UI æ‰€éœ€çš„æ—¶é—´ï¼Œä¿æŒ UI å¯¹è±¡æ•°é‡å°½å¯èƒ½å°‘éå¸¸é‡è¦ã€‚å°½å¯èƒ½å¤šåœ°çƒ˜ç„™å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä¸è¦ä½¿ç”¨æ··åˆçš„ GameObject åªæ˜¯ä¸ºäº†æ”¹å˜å…ƒç´ çš„è‰²è°ƒï¼Œè€Œæ˜¯é€šè¿‡æè´¨å±æ€§æ¥å®ç°ã€‚æ­¤å¤–ï¼Œä¸è¦åˆ›å»ºä»…ç”¨äºç»„ç»‡åœºæ™¯è€Œæ²¡æœ‰å…¶ä»–ç›®çš„çš„ <strong>æ–‡ä»¶å¤¹</strong> æ¸¸æˆå¯¹è±¡ã€‚</p><h4 id="ç¦ç”¨ä¸å¯è§çš„ç›¸æœºè¾“å‡º" tabindex="-1"><a class="header-anchor" href="#ç¦ç”¨ä¸å¯è§çš„ç›¸æœºè¾“å‡º"><span>ç¦ç”¨ä¸å¯è§çš„ç›¸æœºè¾“å‡º</span></a></h4><p>å¦‚æœæ‰“å¼€å…·æœ‰ä¸é€æ˜èƒŒæ™¯çš„å…¨å± UIï¼Œä¸–ç•Œç©ºé—´ç›¸æœºä»å°†æ¸²æŸ“æ ‡å‡† 3D åœºæ™¯åœ¨ UI åé¢ã€‚æ¸²æŸ“å™¨ä¸çŸ¥é“å…¨å± Unity UI å°†é®æŒ¡æ•´ä¸ª 3D åœºæ™¯ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœæ‰“å¼€å®Œå…¨å…¨å±çš„ UIï¼Œç¦ç”¨ä»»ä½•å’Œæ‰€æœ‰è¢«é®æŒ¡çš„ä¸–ç•Œç©ºé—´ç›¸æœºå°†é€šè¿‡ç®€å•åœ°æ¶ˆé™¤æ¸²æŸ“æ— ç”¨ 3D ä¸–ç•Œçš„å·¥ä½œæ¥å¸®åŠ©å‡å°‘ GPU å‹åŠ›ã€‚</p><p>å¦‚æœ UI æ²¡æœ‰è¦†ç›–æ•´ä¸ª 3D åœºæ™¯ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†åœºæ™¯æ¸²æŸ“åˆ°çº¹ç†ä¸€æ¬¡å¹¶ä½¿ç”¨å®ƒï¼Œè€Œä¸æ˜¯æŒç»­æ¸²æŸ“å®ƒã€‚æ‚¨å°†å¤±å»åœ¨ 3D åœºæ™¯ä¸­æŸ¥çœ‹åŠ¨ç”»å†…å®¹çš„å¯èƒ½æ€§ï¼Œä½†è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åº”è¯¥æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœå°† Canvas è®¾ç½®ä¸º <code>Screen Space - Overlay</code>ï¼Œåˆ™æ— è®ºåœºæ™¯ä¸­æœ‰å¤šå°‘æ´»åŠ¨ç›¸æœºï¼Œå®ƒéƒ½å°†è¢«ç»˜åˆ¶ã€‚</p><h4 id="å¤§éƒ¨åˆ†è¢«é®æŒ¡çš„ç›¸æœº" tabindex="-1"><a class="header-anchor" href="#å¤§éƒ¨åˆ†è¢«é®æŒ¡çš„ç›¸æœº"><span>å¤§éƒ¨åˆ†è¢«é®æŒ¡çš„ç›¸æœº</span></a></h4><p>è®¸å¤š &quot;å…¨å±&quot; UI å®é™…ä¸Šå¹¶æ²¡æœ‰é®æŒ¡æ•´ä¸ª 3D ä¸–ç•Œï¼Œè€Œæ˜¯ç•™ä¸‹äº†ä¸€å°éƒ¨åˆ†ä¸–ç•Œå¯è§ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°†ä¸–ç•Œçš„å¯è§éƒ¨åˆ†æ•è·åˆ°æ¸²æŸ“çº¹ç†ä¸­å¯èƒ½æ›´ä¼˜åŒ–ã€‚å¦‚æœä¸–ç•Œçš„å¯è§éƒ¨åˆ†è¢« &quot;ç¼“å­˜&quot; åœ¨æ¸²æŸ“çº¹ç†ä¸­ï¼Œåˆ™å¯ä»¥ç¦ç”¨å®é™…çš„ä¸–ç•Œç©ºé—´ç›¸æœºï¼Œå¹¶ä¸”å¯ä»¥åœ¨ UI å±å¹•åé¢ç»˜åˆ¶ç¼“å­˜çš„æ¸²æŸ“çº¹ç†ä»¥æä¾› 3D ä¸–ç•Œçš„æ›¿èº«ç‰ˆæœ¬ã€‚</p><h4 id="åŸºäºç»„åˆçš„-ui" tabindex="-1"><a class="header-anchor" href="#åŸºäºç»„åˆçš„-ui"><span>åŸºäºç»„åˆçš„ UI</span></a></h4><p>è®¾è®¡å¸ˆé€šå¸¸é€šè¿‡ç»„åˆæ¥åˆ›å»º UI - ç»„åˆå’Œåˆ†å±‚æ ‡å‡†èƒŒæ™¯å’Œå…ƒç´ ä»¥åˆ›å»ºæœ€ç»ˆ UIã€‚è™½ç„¶è¿™æ ·åšç›¸å¯¹ç®€å•ï¼Œå¹¶ä¸”å¯¹è¿­ä»£éå¸¸å‹å¥½ï¼Œä½†ç”±äº Unity UI ä½¿ç”¨é€æ˜æ¸²æŸ“é˜Ÿåˆ—ï¼Œå®ƒçš„æ€§èƒ½ä¸é«˜ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªå…·æœ‰èƒŒæ™¯ã€æŒ‰é’®å’ŒæŒ‰é’®ä¸Šä¸€äº›æ–‡æœ¬çš„ç®€å• UIã€‚ç”±äºé€æ˜é˜Ÿåˆ—ä¸­çš„å¯¹è±¡æ˜¯ä»ååˆ°å‰æ’åºçš„ï¼Œåœ¨åƒç´ è½åœ¨æ–‡æœ¬å­—å½¢å†…çš„æƒ…å†µä¸‹ï¼ŒGPU å¿…é¡»é‡‡æ ·èƒŒæ™¯çš„çº¹ç†ï¼Œç„¶åæ˜¯æŒ‰é’®çš„çº¹ç†ï¼Œæœ€åæ˜¯æ–‡æœ¬å›¾é›†çš„çº¹ç†ï¼Œæ€»å…±ä¸‰ä¸ªé‡‡æ ·ã€‚éšç€ UI å¤æ‚æ€§çš„å¢åŠ ï¼Œä»¥åŠæ›´å¤šè£…é¥°å…ƒç´ åˆ†å±‚åˆ°èƒŒæ™¯ä¸Šï¼Œé‡‡æ ·æ¬¡æ•°å¯ä»¥è¿…é€Ÿå¢åŠ ã€‚</p><p>å¦‚æœå‘ç°å¤§å‹ UI å—é™äºå¡«å……ç‡ï¼Œæœ€å¥½çš„è¡¥æ•‘æªæ–½æ˜¯åˆ›å»ºä¸“é—¨çš„ UI ç²¾çµï¼Œå°† UI çš„è£…é¥°/ä¸å˜å…ƒç´ çš„å°½å¯èƒ½å¤šåˆå¹¶åˆ°å…¶èƒŒæ™¯çº¹ç†ä¸­ã€‚è¿™å‡å°‘äº†å¿…é¡»åˆ†å±‚åœ¨ä¸€èµ·ä»¥å®ç°æ‰€éœ€è®¾è®¡çš„å…ƒç´ æ•°é‡ï¼Œä½†è¿™æ˜¯åŠ³åŠ¨å¯†é›†å‹çš„ï¼Œå¹¶å¢åŠ äº†é¡¹ç›®çº¹ç†å›¾é›†çš„å¤§å°ã€‚</p><p>è¿™ç§å°†åˆ›å»ºç»™å®š UI æ‰€éœ€çš„å±‚å å…ƒç´ æ•°é‡å‹ç¼©åˆ°ä¸“é—¨çš„ UI ç²¾çµä¸Šçš„åŸåˆ™ä¹Ÿå¯ä»¥ç”¨äºå­å…ƒç´ ã€‚è€ƒè™‘ä¸€ä¸ªå¸¦æœ‰æ»šåŠ¨äº§å“çª—æ ¼çš„å•†åº— UIã€‚æ¯ä¸ªäº§å“ UI å…ƒç´ éƒ½æœ‰ä¸€ä¸ªè¾¹æ¡†ã€èƒŒæ™¯å’Œä¸€äº›å›¾æ ‡æ¥è¡¨ç¤ºä»·æ ¼ã€åç§°å’Œå…¶ä»–ä¿¡æ¯ã€‚</p><p>å•†åº— UI éœ€è¦ä¸€ä¸ªèƒŒæ™¯ï¼Œä½†ç”±äºå…¶äº§å“åœ¨èƒŒæ™¯ä¸Šæ»šåŠ¨ï¼Œäº§å“å…ƒç´ ä¸èƒ½åˆå¹¶åˆ°å•†åº— UI çš„èƒŒæ™¯çº¹ç†ä¸Šã€‚ä½†æ˜¯ï¼Œäº§å“ UI å…ƒç´ çš„è¾¹æ¡†ã€ä»·æ ¼ã€åç§°å’Œå…¶ä»–å…ƒç´ å¯ä»¥åˆå¹¶åˆ°äº§å“çš„èƒŒæ™¯ä¸Šã€‚æ ¹æ®å›¾æ ‡çš„å¤§å°å’Œæ•°é‡ï¼Œå¡«å……ç‡çš„èŠ‚çœå¯èƒ½æ˜¯ç›¸å½“å¤§çš„ã€‚</p><p>ç»„åˆå±‚å å…ƒç´ æœ‰å‡ ä¸ªç¼ºç‚¹ã€‚ä¸“ç”¨å…ƒç´ ä¸èƒ½å†é‡å¤ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦é¢å¤–çš„è‰ºæœ¯å®¶èµ„æºæ¥åˆ›å»ºã€‚æ·»åŠ å¤§å‹æ–°çº¹ç†å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ ä¿å­˜ UI çº¹ç†æ‰€éœ€çš„å†…å­˜é‡ï¼Œç‰¹åˆ«æ˜¯å¦‚æœ UI çº¹ç†ä¸æ˜¯æŒ‰éœ€åŠ è½½å’Œå¸è½½çš„ã€‚</p><h4 id="ui-ç€è‰²å™¨å’Œä½è§„æ ¼è®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#ui-ç€è‰²å™¨å’Œä½è§„æ ¼è®¾å¤‡"><span>UI ç€è‰²å™¨å’Œä½è§„æ ¼è®¾å¤‡</span></a></h4><p>Unity UI ä½¿ç”¨çš„å†…ç½®ç€è‰²å™¨åŒ…å«å¯¹é®ç½©ã€è£å‰ªå’Œè®¸å¤šå…¶ä»–å¤æ‚æ“ä½œçš„æ”¯æŒã€‚ç”±äºè¿™ç§å¢åŠ çš„å¤æ‚æ€§ï¼Œä¸æ›´ç®€å•çš„ Unity 2D ç€è‰²å™¨ç›¸æ¯”ï¼ŒUI ç€è‰²å™¨åœ¨ iPhone 4 ç­‰ä½ç«¯è®¾å¤‡ä¸Šè¡¨ç°ä¸ä½³ã€‚</p><p>å¦‚æœé’ˆå¯¹ä½ç«¯è®¾å¤‡çš„åº”ç”¨ç¨‹åºä¸éœ€è¦é®ç½©ã€è£å‰ªå’Œå…¶ä»– &quot;èŠ±å“¨&quot; åŠŸèƒ½ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªçœç•¥æœªä½¿ç”¨æ“ä½œçš„è‡ªå®šä¹‰ç€è‰²å™¨ï¼Œä¾‹å¦‚è¿™ä¸ªæœ€å°çš„ UI ç€è‰²å™¨ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Shader &quot;UI/Fast-Default&quot; </span></span>
<span class="line"><span>{ </span></span>
<span class="line"><span>    Properties { </span></span>
<span class="line"><span>        [PerRendererData] _MainTex (&quot;Sprite Texture&quot;, 2D) = &quot;white&quot; {} </span></span>
<span class="line"><span>        _Color (&quot;Tint&quot;, Color) = (1,1,1,1)</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    SubShader</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        Tags</span></span>
<span class="line"><span>        { </span></span>
<span class="line"><span>            &quot;Queue&quot;=&quot;Transparent&quot; </span></span>
<span class="line"><span>            &quot;IgnoreProjector&quot;=&quot;True&quot; </span></span>
<span class="line"><span>            &quot;RenderType&quot;=&quot;Transparent&quot; </span></span>
<span class="line"><span>            &quot;PreviewType&quot;=&quot;Plane&quot;</span></span>
<span class="line"><span>            &quot;CanUseSpriteAtlas&quot;=&quot;True&quot;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>        Cull Off</span></span>
<span class="line"><span>        Lighting Off</span></span>
<span class="line"><span>        ZWrite Off</span></span>
<span class="line"><span>        ZTest [unity_GUIZTestMode]</span></span>
<span class="line"><span>        Blend SrcAlpha OneMinusSrcAlpha</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>        Pass</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>        CGPROGRAM</span></span>
<span class="line"><span>            #pragma vertex vert</span></span>
<span class="line"><span>            #pragma fragment frag</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>            #include &quot;UnityCG.cginc&quot;</span></span>
<span class="line"><span>            #include &quot;UnityUI.cginc&quot;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>            struct appdata_t</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                float4 vertex   : POSITION;</span></span>
<span class="line"><span>                float4 color    : COLOR;</span></span>
<span class="line"><span>                float2 texcoord : TEXCOORD0;</span></span>
<span class="line"><span>            };</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>            struct v2f</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                float4 vertex   : SV_POSITION;</span></span>
<span class="line"><span>                fixed4 color    : COLOR;</span></span>
<span class="line"><span>                half2 texcoord  : TEXCOORD0;</span></span>
<span class="line"><span>                float4 worldPosition : TEXCOORD1;</span></span>
<span class="line"><span>            };</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>            fixed4 _Color;</span></span>
<span class="line"><span>            fixed4 _TextureSampleAdd;</span></span>
<span class="line"><span>            v2f vert(appdata_t IN)</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                v2f OUT;</span></span>
<span class="line"><span>                OUT.worldPosition = IN.vertex;</span></span>
<span class="line"><span>                OUT.vertex = mul(UNITY_MATRIX_MVP, OUT.worldPosition);</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>                OUT.texcoord = IN.texcoord;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>                #ifdef UNITY_HALF_TEXEL_OFFSET</span></span>
<span class="line"><span>                OUT.vertex.xy += (_ScreenParams.zw-1.0)*float2(-1,1);</span></span>
<span class="line"><span>                #endif</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>                OUT.color = IN.color * _Color;</span></span>
<span class="line"><span>                return OUT;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>            sampler2D _MainTex;</span></span>
<span class="line"><span>            fixed4 frag(v2f IN) : SV_Target</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                return (tex2D(_MainTex, IN.texcoord) + _TextureSampleAdd) * IN.color;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        ENDCG</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥ä» <a href="https://unity.com/releases/editor/whats-new/2022.3.61#installs" target="_blank" rel="noopener noreferrer">Unity2022.3.6 - Shaders(Other installs)</a> ä¸‹è½½ <code>UI-Default.shader</code> æ–‡ä»¶ï¼Œç„¶åå¯¹æ¯”ã€‚</p><h3 id="ui-canvas-é‡å»º" tabindex="-1"><a class="header-anchor" href="#ui-canvas-é‡å»º"><span>UI Canvas é‡å»º</span></a></h3><p>è¦æ˜¾ç¤ºä»»ä½• UIï¼ŒUI ç³»ç»Ÿå¿…é¡»ä¸ºå±å¹•ä¸Šè¡¨ç¤ºçš„æ¯ä¸ª UI ç»„ä»¶æ„å»ºå‡ ä½•ä½“ã€‚è¿™åŒ…æ‹¬è¿è¡ŒåŠ¨æ€å¸ƒå±€ä»£ç ï¼Œç”Ÿæˆè¡¨ç¤º UI æ–‡æœ¬å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„å¤šè¾¹å½¢ï¼Œå¹¶å°†å°½å¯èƒ½å¤šçš„å‡ ä½•ä½“åˆå¹¶åˆ°å•ä¸ªç½‘æ ¼ä¸­ä»¥æœ€å°åŒ–ç»˜åˆ¶è°ƒç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªå¤šæ­¥éª¤çš„è¿‡ç¨‹ï¼Œåœ¨æœ¬æŒ‡å—å¼€å¤´çš„ <a href="#2-unity-ui-%E5%9F%BA%E7%A1%80">åŸºç¡€</a> éƒ¨åˆ†ä¸­æœ‰è¯¦ç»†æè¿°ã€‚</p><p>Canvas é‡å»ºå¯èƒ½ç”±äºä¸¤ä¸ªä¸»è¦åŸå› æˆä¸ºæ€§èƒ½é—®é¢˜ï¼š</p><ul><li>å¦‚æœ Canvas ä¸Šå¯ç»˜åˆ¶çš„ UI å…ƒç´ æ•°é‡å¾ˆå¤§ï¼Œåˆ™è®¡ç®—æ‰¹å¤„ç†æœ¬èº«å˜å¾—éå¸¸æ˜‚è´µã€‚è¿™æ˜¯å› ä¸ºå¯¹å…ƒç´ è¿›è¡Œæ’åºå’Œåˆ†æçš„æˆæœ¬éšç€ Canvas ä¸Šå¯ç»˜åˆ¶ UI å…ƒç´ çš„æ•°é‡å¢é•¿è€Œè¶…çº¿æ€§å¢é•¿ã€‚</li><li>å¦‚æœ Canvas è¢«é¢‘ç¹æ ‡è®°ä¸ºè„ï¼Œåˆ™å¯èƒ½èŠ±è´¹è¿‡å¤šæ—¶é—´åˆ·æ–°å˜åŒ–ç›¸å¯¹è¾ƒå°‘çš„ Canvasã€‚</li></ul><p>é‡è¦æé†’ï¼šæ¯å½“ç»™å®š Canvas ä¸Šçš„ä»»ä½•å¯ç»˜åˆ¶ UI å…ƒç´ å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒCanvas å¿…é¡»é‡æ–°è¿è¡Œæ‰¹å¤„ç†æ„å»ºè¿‡ç¨‹ã€‚æ­¤è¿‡ç¨‹é‡æ–°åˆ†æ Canvas ä¸Šçš„æ¯ä¸ªå¯ç»˜åˆ¶ UI å…ƒç´ ï¼Œæ— è®ºå®ƒæ˜¯å¦å·²æ›´æ”¹ã€‚è¯·æ³¨æ„ï¼Œ&quot;å˜åŒ–&quot;æ˜¯å½±å“ UI å¯¹è±¡å¤–è§‚çš„ä»»ä½•å˜åŒ–ï¼ŒåŒ…æ‹¬åˆ†é…ç»™ç²¾çµæ¸²æŸ“å™¨çš„ç²¾çµã€å˜æ¢ä½ç½®å’Œæ¯”ä¾‹ã€æ–‡æœ¬ç½‘æ ¼ä¸­åŒ…å«çš„æ–‡æœ¬ç­‰ã€‚</p><h4 id="child-é¡ºåº" tabindex="-1"><a class="header-anchor" href="#child-é¡ºåº"><span>Child é¡ºåº</span></a></h4><p>Unity UI æ˜¯ä»ååˆ°å‰æ„å»ºçš„ï¼Œå¯¹è±¡åœ¨å±‚æ¬¡ç»“æ„ä¸­çš„é¡ºåºå†³å®šäº†å®ƒä»¬çš„æ’åºé¡ºåºã€‚å±‚æ¬¡ç»“æ„ä¸­è¾ƒæ—©çš„å¯¹è±¡è¢«è®¤ä¸ºåœ¨å±‚æ¬¡ç»“æ„ä¸­è¾ƒæ™šçš„å¯¹è±¡åé¢ã€‚æ‰¹å¤„ç†æ˜¯é€šè¿‡ä»ä¸Šåˆ°ä¸‹éå†å±‚æ¬¡ç»“æ„å¹¶æ”¶é›†æ‰€æœ‰ä½¿ç”¨ç›¸åŒæè´¨ã€ç›¸åŒçº¹ç†ä¸”æ²¡æœ‰ä¸­é—´å±‚çš„å¯¹è±¡æ¥æ„å»ºçš„ã€‚&quot;ä¸­é—´å±‚&quot; æ˜¯å…·æœ‰ä¸åŒæè´¨çš„å›¾å½¢å¯¹è±¡ï¼Œå…¶è¾¹ç•Œæ¡†é‡å ä¸¤ä¸ªå…¶ä»–å¯æ‰¹å¤„ç†å¯¹è±¡ï¼Œå¹¶æ”¾ç½®åœ¨å±‚æ¬¡ç»“æ„ä¸­è¿™ä¸¤ä¸ªå¯æ‰¹å¤„ç†å¯¹è±¡ä¹‹é—´ã€‚ä¸­é—´å±‚å¼ºåˆ¶æ‰¹å¤„ç†ä¸­æ–­ã€‚</p><p>å¦‚ Unity UI åˆ†æå·¥å…·æ­¥éª¤ä¸­æ‰€è¿°ï¼ŒUI åˆ†æå™¨å’Œå¸§è°ƒè¯•å™¨å¯ç”¨äºæ£€æŸ¥ UI ä¸­çš„ä¸­é—´å±‚ã€‚è¿™æ˜¯ä¸€ç§æƒ…å†µï¼Œå…¶ä¸­ä¸€ä¸ªå¯ç»˜åˆ¶å¯¹è±¡æ’å…¥ä¸¤ä¸ªå…¶ä»–å¯æ‰¹å¤„ç†å¯¹è±¡ä¹‹é—´ã€‚</p><p>è¿™ä¸ªé—®é¢˜æœ€å¸¸è§äºæ–‡æœ¬å’Œç²¾çµå½¼æ­¤é è¿‘æ—¶ï¼šæ–‡æœ¬çš„è¾¹ç•Œæ¡†å¯ä»¥ä¸å¯è§åœ°é‡å é™„è¿‘çš„ç²¾çµï¼Œå› ä¸ºæ–‡æœ¬å­—å½¢çš„å¤šè¾¹å½¢å¤§éƒ¨åˆ†æ˜¯é€æ˜çš„ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è§£å†³ï¼š</p><ul><li>é‡æ–°æ’åºå¯ç»˜åˆ¶å¯¹è±¡ï¼Œä½¿å¯æ‰¹å¤„ç†å¯¹è±¡ä¸è¢«ä¸å¯æ‰¹å¤„ç†å¯¹è±¡æ’å…¥ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†ä¸å¯æ‰¹å¤„ç†å¯¹è±¡ç§»åŠ¨åˆ°å¯æ‰¹å¤„ç†å¯¹è±¡ä¹‹ä¸Šæˆ–ä¹‹ä¸‹ã€‚</li><li>è°ƒæ•´å¯¹è±¡çš„ä½ç½®ä»¥æ¶ˆé™¤ä¸å¯è§çš„é‡å ç©ºé—´ã€‚</li></ul><p>è¿™ä¸¤ç§æ“ä½œéƒ½å¯ä»¥åœ¨ Unity Editor ä¸­å®Œæˆï¼ŒåŒæ—¶æ‰“å¼€å¹¶å¯ç”¨ Unity Frame Debuggerã€‚é€šè¿‡ç®€å•åœ°è§‚å¯Ÿ Unity Frame Debugger ä¸­å¯è§çš„ç»˜åˆ¶è°ƒç”¨æ•°é‡ï¼Œå¯ä»¥æ‰¾åˆ°æœ€å°åŒ–ç”±äºé‡å  UI å…ƒç´ è€Œæµªè´¹çš„ç»˜åˆ¶è°ƒç”¨æ•°é‡çš„é¡ºåºå’Œä½ç½®ã€‚</p><h4 id="æ‹†åˆ†-canvas" tabindex="-1"><a class="header-anchor" href="#æ‹†åˆ†-canvas"><span>æ‹†åˆ† Canvas</span></a></h4><p>åœ¨é™¤æœ€å¾®ä¸è¶³é“çš„æƒ…å†µå¤–ï¼Œé€šå¸¸æœ€å¥½æ‹†åˆ† Canvasï¼Œå¯ä»¥é€šè¿‡å°†å…ƒç´ ç§»åŠ¨åˆ°å­ Canvas æˆ–åŒçº§ Canvas æ¥å®ç°ã€‚</p><p>åŒçº§ Canvas æœ€é€‚åˆç”¨äº UI çš„æŸäº›éƒ¨åˆ†å¿…é¡»ä¸å…¶ä»–å±‚çš„ç»˜åˆ¶æ·±åº¦åˆ†å¼€æ§åˆ¶çš„æƒ…å†µï¼Œä¾‹å¦‚å§‹ç»ˆåœ¨å…¶ä»–å±‚ä¹‹ä¸Šæˆ–ä¹‹ä¸‹ï¼ˆä¾‹å¦‚æ•™ç¨‹ç®­å¤´ï¼‰ã€‚</p><p>åœ¨å¤§å¤šæ•°å…¶ä»–æƒ…å†µä¸‹ï¼Œå­ Canvas æ›´æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬ä»å…¶çˆ¶ Canvas ç»§æ‰¿æ˜¾ç¤ºè®¾ç½®ã€‚</p><p>è™½ç„¶ä¹ä¸€çœ‹å°† UI ç»†åˆ†ä¸ºè®¸å¤šå­ Canvas ä¼¼ä¹æ˜¯æœ€ä½³å®è·µï¼Œä½†è¯·è®°ä½ Canvas ç³»ç»Ÿä¹Ÿä¸ä¼šè·¨å•ç‹¬çš„ Canvas ç»„åˆæ‰¹å¤„ç†ã€‚æ€§èƒ½è‰¯å¥½çš„ UI è®¾è®¡éœ€è¦åœ¨æœ€å°åŒ–é‡å»ºæˆæœ¬å’Œæœ€å°åŒ–æµªè´¹çš„ç»˜åˆ¶è°ƒç”¨ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p><p><strong>ä¸€èˆ¬å‡†åˆ™</strong></p><p>ç”±äº Canvas åœ¨ä»»ä½•å…¶ç»„æˆçš„å¯ç»˜åˆ¶ç»„ä»¶å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šé‡æ–°æ‰¹å¤„ç†ï¼Œé€šå¸¸æœ€å¥½å°†ä»»ä½•éå¹³å‡¡çš„ Canvas è‡³å°‘åˆ†æˆä¸¤éƒ¨åˆ†ã€‚æ­¤å¤–ï¼Œæœ€å¥½å°è¯•å°†é¢„æœŸåŒæ—¶å˜åŒ–çš„å…ƒç´ å…±ç½®åœ¨åŒä¸€ Canvas ä¸Šã€‚ä¸€ä¸ªä¾‹å­å¯èƒ½æ˜¯è¿›åº¦æ¡å’Œå€’è®¡æ—¶è®¡æ—¶å™¨ã€‚è¿™ä¸¤è€…éƒ½ä¾èµ–äºç›¸åŒçš„åŸºç¡€æ•°æ®ï¼Œå› æ­¤å°†éœ€è¦åŒæ—¶æ›´æ–°ï¼Œå› æ­¤å®ƒä»¬åº”æ”¾ç½®åœ¨åŒä¸€ Canvas ä¸Šã€‚</p><p>åœ¨ä¸€ä¸ª Canvas ä¸Šï¼Œæ”¾ç½®æ‰€æœ‰é™æ€å’Œä¸å˜çš„å…ƒç´ ï¼Œä¾‹å¦‚èƒŒæ™¯å’Œæ ‡ç­¾ã€‚è¿™äº›å°†åœ¨ Canvas é¦–æ¬¡æ˜¾ç¤ºæ—¶æ‰¹å¤„ç†ä¸€æ¬¡ï¼Œä¹‹åä¸å†éœ€è¦é‡æ–°æ‰¹å¤„ç†ã€‚</p><p>åœ¨ç¬¬äºŒä¸ª Canvas ä¸Šï¼Œæ”¾ç½®æ‰€æœ‰&quot;åŠ¨æ€&quot;å…ƒç´  - é‚£äº›é¢‘ç¹å˜åŒ–çš„å…ƒç´ ã€‚è¿™å°†ç¡®ä¿æ­¤ Canvas ä¸»è¦é‡æ–°æ‰¹å¤„ç†è„å…ƒç´ ã€‚å¦‚æœåŠ¨æ€å…ƒç´ æ•°é‡å˜å¾—éå¸¸å¤šï¼Œå¯èƒ½éœ€è¦å°†åŠ¨æ€å…ƒç´ è¿›ä¸€æ­¥ç»†åˆ†ä¸ºä¸€ç»„ä¸æ–­å˜åŒ–çš„å…ƒç´ ï¼ˆä¾‹å¦‚è¿›åº¦æ¡ã€è®¡æ—¶å™¨è¯»æ•°ã€ä»»ä½•åŠ¨ç”»ï¼‰å’Œä¸€ç»„ä»…å¶å°”å˜åŒ–çš„å…ƒç´ ã€‚</p><p>è¿™å®é™…ä¸Šåœ¨å®è·µä¸­ç›¸å½“å›°éš¾ï¼Œç‰¹åˆ«æ˜¯åœ¨å°† UI æ§ä»¶å°è£…åˆ°é¢„åˆ¶ä»¶ä¸­æ—¶ã€‚è®¸å¤š UI æ”¹ä¸ºé€‰æ‹©é€šè¿‡å°†æˆæœ¬è¾ƒé«˜çš„æ§ä»¶æ‹†åˆ†åˆ°å­ Canvas ä¸Šæ¥ç»†åˆ† Canvasã€‚</p><p><strong>Unity 5.2 å’Œä¼˜åŒ–æ‰¹å¤„ç†</strong></p><p>åœ¨ Unity 5.2 ä¸­ï¼Œæ‰¹å¤„ç†ä»£ç è¢«å¤§å¹…é‡å†™ï¼Œä¸ Unity 4.6ã€5.0 å’Œ 5.1 ç›¸æ¯”æ€§èƒ½æ˜¾è‘—æé«˜ã€‚æ­¤å¤–ï¼Œåœ¨å…·æœ‰å¤šä¸ªæ ¸å¿ƒçš„è®¾å¤‡ä¸Šï¼ŒUnity UI ç³»ç»Ÿä¼šå°†å¤§éƒ¨åˆ†å¤„ç†ç§»åŠ¨åˆ°å·¥ä½œçº¿ç¨‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒUnity 5.2 å‡å°‘äº†å¯¹å°† UI ç§¯ææ‹†åˆ†ä¸ºæ•°åä¸ªå­ Canvas çš„éœ€æ±‚ã€‚ç§»åŠ¨è®¾å¤‡ä¸Šçš„è®¸å¤š UI ç°åœ¨å¯ä»¥ç”¨ä¸¤åˆ°ä¸‰ä¸ª Canvas å®ç°è‰¯å¥½çš„æ€§èƒ½ã€‚</p><h3 id="unity-ui-ä¸­çš„è¾“å…¥å’Œå°„çº¿æ£€æµ‹" tabindex="-1"><a class="header-anchor" href="#unity-ui-ä¸­çš„è¾“å…¥å’Œå°„çº¿æ£€æµ‹"><span>Unity UI ä¸­çš„è¾“å…¥å’Œå°„çº¿æ£€æµ‹</span></a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒUnity UI ä½¿ç”¨ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.GraphicRaycaster.html" target="_blank" rel="noopener noreferrer">Graphic Raycaster</a> ç»„ä»¶å¤„ç†è¾“å…¥äº‹ä»¶ï¼Œä¾‹å¦‚è§¦æ‘¸äº‹ä»¶å’ŒæŒ‡é’ˆæ‚¬åœäº‹ä»¶ã€‚è¿™é€šå¸¸ç”± <code>Standalone Input Manager</code> ç»„ä»¶å¤„ç†ã€‚å°½ç®¡åç§°å¦‚æ­¤ï¼Œ<code>Standalone Input Manager</code> æ—¨åœ¨æˆä¸ºä¸€ä¸ª &quot;é€šç”¨&quot; è¾“å…¥ç®¡ç†ç³»ç»Ÿï¼Œå¹¶å°†å¤„ç†æŒ‡é’ˆå’Œè§¦æ‘¸ã€‚</p><h4 id="ç§»åŠ¨è®¾å¤‡ä¸Šé”™è¯¯çš„é¼ æ ‡è¾“å…¥æ£€æµ‹-5-3" tabindex="-1"><a class="header-anchor" href="#ç§»åŠ¨è®¾å¤‡ä¸Šé”™è¯¯çš„é¼ æ ‡è¾“å…¥æ£€æµ‹-5-3"><span>ç§»åŠ¨è®¾å¤‡ä¸Šé”™è¯¯çš„é¼ æ ‡è¾“å…¥æ£€æµ‹(5.3)</span></a></h4><p>åœ¨ Unity 5.4 ä¹‹å‰ï¼Œæ¯ä¸ªé™„åŠ äº† <code>Graphic Raycaster</code> çš„æ´»åŠ¨ Canvas å°†æ¯å¸§è¿è¡Œä¸€æ¬¡å°„çº¿æ£€æµ‹ä»¥æ£€æŸ¥æŒ‡é’ˆçš„ä½ç½®ï¼Œåªè¦å½“å‰æ²¡æœ‰å¯ç”¨çš„è§¦æ‘¸è¾“å…¥ã€‚è¿™å°†å‘ç”Ÿåœ¨æ‰€æœ‰å¹³å°ä¸Šï¼›æ²¡æœ‰é¼ æ ‡çš„ iOS å’Œ Android è®¾å¤‡ä»å°†æŸ¥è¯¢é¼ æ ‡çš„ä½ç½®ï¼Œå¹¶å°è¯•å‘ç°å“ªäº› UI å…ƒç´ ä½äºè¯¥ä½ç½®ä¸‹æ–¹ï¼Œä»¥ç¡®å®šæ˜¯å¦éœ€è¦å‘é€ä»»ä½•æ‚¬åœäº‹ä»¶ã€‚</p><p>è¿™æ˜¯ CPU æ—¶é—´çš„æµªè´¹ï¼Œå¹¶ä¸”å·²ç»è§‚å¯Ÿåˆ°æ¶ˆè€— Unity åº”ç”¨ç¨‹åº CPU å¸§æ—¶é—´çš„ 5% æˆ–æ›´å¤šã€‚</p><p>æ­¤é—®é¢˜å·²åœ¨ Unity 5.4 ä¸­è§£å†³ã€‚ä» 5.4 å¼€å§‹ï¼Œæ²¡æœ‰é¼ æ ‡çš„è®¾å¤‡å°†ä¸ä¼šæŸ¥è¯¢é¼ æ ‡ä½ç½®ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œä¸å¿…è¦çš„å°„çº¿æ£€æµ‹ã€‚</p><p>å¦‚æœä½¿ç”¨æ—©äº 5.4 çš„ Unity ç‰ˆæœ¬ï¼Œå¼ºçƒˆå»ºè®®ç§»åŠ¨å¼€å‘è€…åˆ›å»ºè‡ªå·±çš„ Input Manager ç±»ã€‚è¿™å¯ä»¥åƒå¤åˆ¶ Unity çš„ <code>Standard Input Manager</code> ä» Unity UI æºä»£ç å¹¶æ³¨é‡Šæ‰ <code>ProcessMouseEvent</code> æ–¹æ³•ä»¥åŠå¯¹è¯¥æ–¹æ³•çš„æ‰€æœ‰è°ƒç”¨ä¸€æ ·ç®€å•ã€‚</p><h4 id="å°„çº¿æ£€æµ‹ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å°„çº¿æ£€æµ‹ä¼˜åŒ–"><span>å°„çº¿æ£€æµ‹ä¼˜åŒ–</span></a></h4><p>Graphic Raycaster æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„å®ç°ï¼Œå®ƒéå†æ‰€æœ‰å°† <code>Raycast Target</code> è®¾ç½®è®¾ç½®ä¸º true çš„ Graphic ç»„ä»¶ã€‚å¯¹äºæ¯ä¸ª Raycast Targetï¼ŒRaycaster æ‰§è¡Œä¸€ç»„æµ‹è¯•ã€‚å¦‚æœ Raycast Target é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°å‘½ä¸­åˆ—è¡¨ä¸­ã€‚</p><p><strong>å°„çº¿æ£€æµ‹å®ç°ç»†èŠ‚</strong></p><ul><li>å¦‚æœ Raycast Target å¤„äºæ´»åŠ¨çŠ¶æ€ã€å·²å¯ç”¨å¹¶ä¸”è¢«ç»˜åˆ¶ï¼ˆå³æœ‰å‡ ä½•ä½“ï¼‰</li><li>å¦‚æœè¾“å…¥ç‚¹ä½äº Raycast Target é™„åŠ åˆ°çš„ RectTransform å†…</li><li>å¦‚æœ Raycast Target å…·æœ‰æˆ–æ˜¯åœ¨ä»»ä½•æ·±åº¦çš„å­çº§ä»»ä½• <a href="http://docs.unity3d.com/ScriptReference/ICanvasRaycastFilter.html" target="_blank" rel="noopener noreferrer">ICanvasRaycastFilter</a> ç»„ä»¶ï¼Œå¹¶ä¸”è¯¥ Raycast Filter ç»„ä»¶å…è®¸ Raycastã€‚</li></ul><p>ç„¶åæŒ‰æ·±åº¦å¯¹å‘½ä¸­çš„ Raycast Target åˆ—è¡¨è¿›è¡Œæ’åºï¼Œè¿‡æ»¤åå‘ç›®æ ‡ï¼Œå¹¶è¿‡æ»¤ä»¥ç¡®ä¿ç§»é™¤åœ¨ç›¸æœºåé¢æ¸²æŸ“çš„å…ƒç´ ï¼ˆå³åœ¨å±å¹•ä¸­ä¸å¯è§ï¼‰ã€‚</p><p>Graphic Raycaster è¿˜å¯ä»¥å°†å°„çº¿æŠ•å°„åˆ° 3D æˆ– 2D ç‰©ç†ç³»ç»Ÿä¸­ï¼Œå¦‚æœåœ¨ Graphic Raycaster çš„ <code>Blocking Objects</code> å±æ€§ä¸Šè®¾ç½®äº†ç›¸åº”çš„æ ‡å¿—ã€‚</p><p>å¦‚æœå¯ç”¨äº† 2D æˆ– 3D é˜»æŒ¡å¯¹è±¡ï¼Œåˆ™ä»»ä½•ç»˜åˆ¶åœ¨ä½äºå°„çº¿é˜»æŒ¡ç‰©ç†å±‚ä¸Šçš„ 2D æˆ– 3D å¯¹è±¡ä¸‹æ–¹çš„ Raycast Target ä¹Ÿå°†ä»å‘½ä¸­åˆ—è¡¨ä¸­æ¶ˆé™¤ã€‚</p><p>æœ€åè¿”å›æœ€ç»ˆçš„å‘½ä¸­åˆ—è¡¨ã€‚</p><p><strong>å°„çº¿æ£€æµ‹ä¼˜åŒ–æŠ€å·§</strong></p><p>é‰´äºæ‰€æœ‰ Raycast Target éƒ½å¿…é¡»ç”± Graphic Raycaster æµ‹è¯•ï¼Œæœ€ä½³å®è·µæ˜¯ä»…åœ¨å¿…é¡»æ¥æ”¶æŒ‡é’ˆäº‹ä»¶çš„ UI ç»„ä»¶ä¸Šå¯ç”¨ <code>Raycast Target</code> è®¾ç½®ã€‚Raycast Target åˆ—è¡¨è¶Šå°ï¼Œå¿…é¡»éå†çš„å±‚æ¬¡ç»“æ„è¶Šæµ…ï¼Œæ¯æ¬¡ Raycast æµ‹è¯•çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚</p><p>å¯¹äºå…·æœ‰å¤šä¸ªå¿…é¡»å“åº”æŒ‡é’ˆäº‹ä»¶çš„å¯ç»˜åˆ¶ UI å¯¹è±¡çš„å¤åˆ UI æ§ä»¶ï¼Œä¾‹å¦‚å¸Œæœ›å…¶èƒŒæ™¯å’Œæ–‡æœ¬éƒ½æ”¹å˜é¢œè‰²çš„æŒ‰é’®ï¼Œé€šå¸¸æœ€å¥½åœ¨å¤åˆ UI æ§ä»¶çš„æ ¹éƒ¨æ”¾ç½®å•ä¸ª Raycast Targetã€‚å½“è¯¥å•ä¸ª Raycast Target æ¥æ”¶åˆ°æŒ‡é’ˆäº‹ä»¶æ—¶ï¼Œå®ƒå¯ä»¥å°†äº‹ä»¶è½¬å‘ç»™å¤åˆæ§ä»¶ä¸­æ¯ä¸ªæ„Ÿå…´è¶£çš„ç»„ä»¶ã€‚</p><p><strong>å±‚æ¬¡æ·±åº¦å’Œå°„çº¿æ£€æµ‹è¿‡æ»¤å™¨</strong></p><p>æ¯ä¸ª Graphic Raycast åœ¨æœç´¢å°„çº¿æ£€æµ‹è¿‡æ»¤å™¨æ—¶ä¼šä¸€ç›´éå† Transform å±‚æ¬¡ç»“æ„åˆ°æ ¹èŠ‚ç‚¹ã€‚æ­¤æ“ä½œçš„æˆæœ¬ä¸å±‚æ¬¡ç»“æ„çš„æ·±åº¦æˆçº¿æ€§æ¯”ä¾‹å¢é•¿ã€‚å¿…é¡»æµ‹è¯•åœ¨å±‚æ¬¡ç»“æ„ä¸­æ¯ä¸ª Transform ä¸Šæ‰¾åˆ°çš„æ‰€æœ‰ç»„ä»¶ï¼Œä»¥æŸ¥çœ‹å®ƒä»¬æ˜¯å¦å®ç°äº† <a href="http://docs.unity3d.com/ScriptReference/ICanvasRaycastFilter.html" target="_blank" rel="noopener noreferrer">ICanvasRaycastFilter</a>ï¼Œå› æ­¤è¿™ä¸æ˜¯ä¸€ä¸ªå»‰ä»·çš„æ“ä½œã€‚</p><p><strong>å­ Canvas å’Œ OverrideSorting å±æ€§</strong></p><p>å­ Canvas ä¸Šçš„ <a href="http://docs.unity3d.com/ScriptReference/Canvas-overrideSorting.html" target="_blank" rel="noopener noreferrer">overrideSorting</a> å±æ€§å°†å¯¼è‡´ Graphic Raycast æµ‹è¯•åœæ­¢çˆ¬å‡å˜æ¢å±‚æ¬¡ç»“æ„ã€‚å¦‚æœå¯ä»¥åœ¨ä¸å¼•èµ·æ’åºæˆ–å°„çº¿æ£€æµ‹é—®é¢˜çš„æƒ…å†µä¸‹å¯ç”¨å®ƒï¼Œåˆ™åº”ä½¿ç”¨å®ƒæ¥å‡å°‘å°„çº¿æ£€æµ‹å±‚æ¬¡éå†çš„æˆæœ¬ã€‚</p><h2 id="_5-ä¼˜åŒ–-ui-æ§ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-ä¼˜åŒ–-ui-æ§ä»¶"><span>5. ä¼˜åŒ– UI æ§ä»¶</span></a></h2><p>æœ¬ä¼˜åŒ– Unity UI æŒ‡å—çš„è¿™ä¸€éƒ¨åˆ†é‡ç‚¹è®¨è®ºç‰¹å®šç±»å‹ UI æ§ä»¶çš„é—®é¢˜ã€‚è™½ç„¶å¤§å¤šæ•° UI æ§ä»¶åœ¨æ€§èƒ½æ–¹é¢ç›¸å¯¹ç›¸ä¼¼ï¼Œä½†æœ‰ä¸¤ä¸ªçªå‡ºè¡¨ç°ä¸ºæ¥è¿‘å¯å‘å¸ƒçŠ¶æ€çš„æ¸¸æˆä¸­é‡åˆ°çš„è®¸å¤šæ€§èƒ½é—®é¢˜çš„åŸå› ã€‚</p><h3 id="ui-æ–‡æœ¬" tabindex="-1"><a class="header-anchor" href="#ui-æ–‡æœ¬"><span>UI æ–‡æœ¬</span></a></h3><p>Unity å†…ç½®çš„ Text ç»„ä»¶æ˜¯åœ¨ UI ä¸­æ˜¾ç¤ºå…‰æ …åŒ–æ–‡æœ¬å­—å½¢çš„ä¾¿æ·æ–¹å¼ã€‚ç„¶è€Œï¼Œæœ‰è®¸å¤šè¡Œä¸ºå¹¶ä¸å¸¸è§ï¼Œä½†ç»å¸¸è¡¨ç°ä¸ºæ€§èƒ½çƒ­ç‚¹ã€‚åœ¨å‘ UI æ·»åŠ æ–‡æœ¬æ—¶ï¼Œè¯·å§‹ç»ˆè®°ä½æ–‡æœ¬å­—å½¢å®é™…ä¸Šæ˜¯ä½œä¸ºå•ç‹¬çš„å››è¾¹å½¢å‘ˆç°çš„ï¼Œæ¯ä¸ªå­—ç¬¦ä¸€ä¸ªã€‚è¿™äº›å››è¾¹å½¢å¾€å¾€æœ‰å¤§é‡å›´ç»•å­—å½¢çš„ç©ºç™½ç©ºé—´ï¼Œå…·ä½“å–å†³äºå…¶å½¢çŠ¶ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å°†æ–‡æœ¬å®šä½åœ¨æ— æ„ä¸­ç ´åå…¶ä»– UI å…ƒç´ æ‰¹å¤„ç†çš„ä½ç½®ã€‚</p><p><strong>æ–‡æœ¬ç½‘æ ¼é‡å»º</strong></p><p>ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯ UI æ–‡æœ¬ç½‘æ ¼çš„é‡å»ºã€‚æ¯å½“ UI Text ç»„ä»¶æ›´æ”¹æ—¶ï¼Œæ–‡æœ¬ç»„ä»¶å¿…é¡»é‡æ–°è®¡ç®—ç”¨äºæ˜¾ç¤ºå®é™…æ–‡æœ¬çš„å¤šè¾¹å½¢ã€‚å¦‚æœæ–‡æœ¬ç»„ä»¶æˆ–å…¶ä»»ä½•çˆ¶ GameObject è¢«ç®€å•åœ°ç¦ç”¨å’Œé‡æ–°å¯ç”¨è€Œä¸æ›´æ”¹æ–‡æœ¬ï¼Œä¹Ÿä¼šå‘ç”Ÿæ­¤é‡æ–°è®¡ç®—ã€‚</p><p>æ­¤è¡Œä¸ºå¯¹äºæ˜¾ç¤ºå¤§é‡æ–‡æœ¬æ ‡ç­¾çš„ä»»ä½• UI éƒ½æ˜¯æœ‰é—®é¢˜çš„ï¼Œæœ€å¸¸è§çš„æ˜¯æ’è¡Œæ¦œæˆ–ç»Ÿè®¡å±å¹•ã€‚ç”±äºéšè—å’Œæ˜¾ç¤º Unity UI çš„æœ€å¸¸è§æ–¹æ³•æ˜¯å¯ç”¨/ç¦ç”¨åŒ…å« UI çš„ GameObjectï¼Œå…·æœ‰å¤§é‡æ–‡æœ¬ç»„ä»¶çš„ UI åœ¨æ˜¾ç¤ºæ—¶é€šå¸¸ä¼šå¯¼è‡´ä¸è‰¯çš„å¸§é€Ÿç‡å¡é¡¿ã€‚</p><p>æœ‰å…³æ­¤é—®é¢˜çš„æ½œåœ¨è§£å†³æ–¹æ³•ï¼Œè¯·å‚é˜…ä¸‹ä¸€æ­¥ä¸­çš„ <a href="#%E7%A6%81%E7%94%A8-canvas">ç¦ç”¨ Canvas</a> éƒ¨åˆ†ã€‚</p><p><strong>åŠ¨æ€å­—ä½“å’Œå­—ä½“å›¾é›†</strong></p><p>åŠ¨æ€å­—ä½“æ˜¯å½“å¯æ˜¾ç¤ºå­—ç¬¦é›†éå¸¸å¤§æˆ–åœ¨è¿è¡Œæ—¶ä¹‹å‰æœªçŸ¥æ—¶æ˜¾ç¤ºæ–‡æœ¬çš„ä¾¿æ·æ–¹å¼ã€‚åœ¨ Unity çš„å®ç°ä¸­ï¼Œè¿™äº›å­—ä½“æ ¹æ® UI Text ç»„ä»¶ä¸­é‡åˆ°çš„å­—ç¬¦åœ¨è¿è¡Œæ—¶æ„å»ºå­—å½¢å›¾é›†ã€‚</p><p>æ¯ä¸ªåŠ è½½çš„ä¸åŒ Font å¯¹è±¡å°†ç»´æŠ¤è‡ªå·±çš„çº¹ç†å›¾é›†ï¼Œå³ä½¿å®ƒä¸å¦ä¸€ä¸ªå­—ä½“å±äºåŒä¸€å­—ä½“ç³»åˆ—ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ§ä»¶ä¸Šä½¿ç”¨ Arial åŠ ç²—æ–‡æœ¬ï¼Œè€Œåœ¨å¦ä¸€ä¸ªæ§ä»¶ä¸Šä½¿ç”¨ Arial Bold å°†äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œä½† Unity å°†ç»´æŠ¤ä¸¤ä¸ªä¸åŒçš„çº¹ç†å›¾é›† - ä¸€ä¸ªç”¨äº Arialï¼Œä¸€ä¸ªç”¨äº Arial Boldã€‚</p><p>ä»æ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œæœ€é‡è¦çš„æ˜¯è¦ç†è§£ Unity UI çš„åŠ¨æ€å­—ä½“åœ¨å­—ä½“çš„çº¹ç†å›¾é›†ä¸­ä¸ºæ¯ä¸ªå¤§å°ã€æ ·å¼å’Œå­—ç¬¦çš„ä¸åŒç»„åˆç»´æŠ¤ä¸€ä¸ªå­—å½¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ UI åŒ…å«ä¸¤ä¸ªæ–‡æœ¬ç»„ä»¶ï¼Œéƒ½æ˜¾ç¤ºå­—æ¯ <code>A</code>ï¼Œé‚£ä¹ˆï¼š</p><ul><li>å¦‚æœä¸¤ä¸ª Text ç»„ä»¶å…±äº«ç›¸åŒçš„å¤§å°ï¼Œå­—ä½“å›¾é›†å°†æœ‰ä¸€ä¸ªå­—å½¢ã€‚</li><li>å¦‚æœä¸¤ä¸ª Text ç»„ä»¶ä¸å…±äº«ç›¸åŒçš„å¤§å°ï¼ˆä¾‹å¦‚ä¸€ä¸ªæ˜¯ 16 ç‚¹ï¼Œå¦ä¸€ä¸ªæ˜¯ 24 ç‚¹ï¼‰ï¼Œåˆ™å­—ä½“å›¾é›†å°†åŒ…å«ä¸¤ä¸ªä¸åŒå¤§å°çš„å­—æ¯ <code>A</code>ã€‚</li><li>å¦‚æœä¸€ä¸ª Text ç»„ä»¶æ˜¯ç²—ä½“è€Œå¦ä¸€ä¸ªä¸æ˜¯ï¼Œåˆ™å­—ä½“å›¾é›†å°†åŒ…å«ä¸€ä¸ªç²—ä½“ <code>A</code> å’Œä¸€ä¸ªå¸¸è§„ <code>A</code>ã€‚</li></ul><p>æ¯å½“å…·æœ‰åŠ¨æ€å­—ä½“çš„ UI Text å¯¹è±¡é‡åˆ°å°šæœªå…‰æ …åŒ–åˆ°å­—ä½“çº¹ç†å›¾é›†ä¸­çš„å­—å½¢æ—¶ï¼Œå­—ä½“çš„çº¹ç†å›¾é›†å¿…é¡»é‡å»ºã€‚å¦‚æœæ–°å­—å½¢é€‚åˆå½“å‰å›¾é›†ï¼Œåˆ™æ·»åŠ å®ƒå¹¶å°†å›¾é›†é‡æ–°ä¸Šä¼ åˆ°å›¾å½¢è®¾å¤‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœå½“å‰å›¾é›†å¤ªå°ï¼Œåˆ™ç³»ç»Ÿä¼šå°è¯•é‡å»ºå›¾é›†ã€‚å®ƒåˆ†ä¸¤ä¸ªé˜¶æ®µå®Œæˆæ­¤æ“ä½œã€‚</p><ul><li><p>é¦–å…ˆï¼Œä»¥ç›¸åŒå¤§å°é‡å»ºå›¾é›†ï¼Œä»…ä½¿ç”¨å½“å‰ç”±æ´»åŠ¨çš„ UI Text ç»„ä»¶æ˜¾ç¤ºçš„å­—å½¢ã€‚è¿™åŒ…æ‹¬çˆ¶ Canvas å·²å¯ç”¨ä½†å…·æœ‰ç¦ç”¨ Canvas Renderers çš„ UI Text ç»„ä»¶ã€‚å¦‚æœç³»ç»ŸæˆåŠŸå°†æ‰€æœ‰å½“å‰ä½¿ç”¨çš„å­—å½¢æ”¾å…¥æ–°å›¾é›†ä¸­ï¼Œåˆ™å…‰æ …åŒ–è¯¥å›¾é›†å¹¶ä¸”ä¸ç»§ç»­ç¬¬äºŒæ­¥ã€‚</p></li><li><p>å…¶æ¬¡ï¼Œå¦‚æœå½“å‰ä½¿ç”¨çš„å­—å½¢é›†æ— æ³•æ”¾å…¥ä¸å½“å‰å›¾é›†ç›¸åŒå¤§å°çš„å›¾é›†ä¸­ï¼Œåˆ™é€šè¿‡å°†å›¾é›†çš„è¾ƒçŸ­ç»´åº¦åŠ å€æ¥åˆ›å»ºæ›´å¤§çš„å›¾é›†ã€‚ä¾‹å¦‚ï¼Œ512x512 å›¾é›†æ‰©å±•ä¸º 512x1024 å›¾é›†ã€‚</p></li></ul><p>ç”±äºä¸Šè¿°ç®—æ³•ï¼ŒåŠ¨æ€å­—ä½“çš„å›¾é›†ä¸€æ—¦åˆ›å»ºå°±åªä¼šå¢å¤§ã€‚è€ƒè™‘åˆ°é‡å»ºçº¹ç†å›¾é›†çš„æˆæœ¬ï¼Œå¿…é¡»æœ€å°åŒ–é‡å»ºæ¬¡æ•°ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®Œæˆã€‚</p><p>åªè¦å¯èƒ½ï¼Œä½¿ç”¨éåŠ¨æ€å­—ä½“å¹¶é¢„å…ˆé…ç½®å¯¹æ‰€éœ€å­—å½¢é›†çš„æ”¯æŒã€‚è¿™é€šå¸¸é€‚ç”¨äºä½¿ç”¨è‰¯å¥½çº¦æŸå­—ç¬¦é›†ï¼ˆå¦‚ä»…æ‹‰ä¸/ASCII å­—ç¬¦ï¼‰å’Œå°èŒƒå›´å¤§å°çš„ UIã€‚</p><p>å¦‚æœå¿…é¡»æ”¯æŒæå¤§èŒƒå›´çš„å­—ç¬¦ï¼Œä¾‹å¦‚æ•´ä¸ª Unicode é›†ï¼Œåˆ™å¿…é¡»å°†å­—ä½“è®¾ç½®ä¸º Dynamicã€‚ä¸ºé¿å…å¯é¢„æµ‹çš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨å¯åŠ¨æ—¶é€šè¿‡ <a href="http://docs.unity3d.com/ScriptReference/Font.RequestCharactersInTexture.html" target="_blank" rel="noopener noreferrer">Font.RequestCharactersInTexture</a> ç”¨ä¸€ç»„é€‚å½“çš„å­—ç¬¦åˆå§‹åŒ–å­—ä½“çš„å­—å½¢å›¾é›†ã€‚</p><p>è¯·æ³¨æ„ï¼Œå­—ä½“å›¾é›†é‡å»ºæ˜¯ç”±æ¯ä¸ªæ›´æ”¹çš„ UI Text ç»„ä»¶å•ç‹¬è§¦å‘çš„ã€‚å½“å¡«å……æå¤§é‡çš„ Text ç»„ä»¶æ—¶ï¼Œæ”¶é›† Text ç»„ä»¶å†…å®¹ä¸­çš„æ‰€æœ‰å”¯ä¸€å­—ç¬¦å¹¶åˆå§‹åŒ–å­—ä½“å›¾é›†å¯èƒ½æ˜¯æœ‰åˆ©çš„ã€‚è¿™å°†ç¡®ä¿å­—å½¢å›¾é›†åªéœ€è¦é‡å»ºä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡é‡åˆ°æ–°å­—å½¢æ—¶éƒ½é‡å»ºä¸€æ¬¡ã€‚</p><p>è¿˜è¦æ³¨æ„ï¼Œå½“è§¦å‘å­—ä½“å›¾é›†é‡å»ºæ—¶ï¼Œä»»ä½•å½“å‰ä¸åŒ…å«åœ¨æ´»åŠ¨ UI Text ç»„ä»¶ä¸­çš„å­—ç¬¦éƒ½ä¸ä¼šå‡ºç°åœ¨æ–°å›¾é›†ä¸­ï¼Œå³ä½¿å®ƒä»¬æœ€åˆæ˜¯é€šè¿‡è°ƒç”¨ <a href="http://docs.unity3d.com/ScriptReference/Font.RequestCharactersInTexture.html" target="_blank" rel="noopener noreferrer">Font.RequestCharactersInTexture</a> æ·»åŠ åˆ°å›¾é›†ä¸­çš„ã€‚è¦è§£å†³æ­¤é™åˆ¶ï¼Œè¯·è®¢é˜… <code>Font.textureRebuilt</code> å§”æ‰˜å¹¶æŸ¥è¯¢ <a href="http://docs.unity3d.com/ScriptReference/Font-characterInfo.html" target="_blank" rel="noopener noreferrer">Font.characterInfo</a> ä»¥ç¡®ä¿æ‰€æœ‰æ‰€éœ€å­—ç¬¦ä¿æŒåˆå§‹åŒ–çŠ¶æ€ã€‚</p><p><code>Font.textureRebuilt</code> å§”æ‰˜ç›®å‰æœªè®°å½•ã€‚å®ƒæ˜¯ä¸€ä¸ª <a href="http://docs.unity3d.com/ScriptReference/Events.UnityEvent_1.html" target="_blank" rel="noopener noreferrer">å•å‚æ•° Unity Event</a>ã€‚å‚æ•°æ˜¯çº¹ç†è¢«é‡å»ºçš„å­—ä½“ã€‚æ­¤äº‹ä»¶çš„è®¢é˜…è€…åº”éµå¾ªä»¥ä¸‹ç­¾åï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TextureRebuiltCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Font</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> rebuiltFont</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>ä¸“ç”¨å­—å½¢æ¸²æŸ“å™¨</strong></p><p>å¯¹äºå­—å½¢å·²çŸ¥ä¸”å„å­—å½¢ä¹‹é—´ä½ç½®ç›¸å¯¹å›ºå®šçš„æƒ…å†µï¼Œç¼–å†™è‡ªå®šä¹‰ç»„ä»¶æ¥æ˜¾ç¤ºè¿™äº›å­—å½¢çš„ç²¾çµè¦æœ‰åˆ©å¾—å¤šã€‚ä¸€ä¸ªä¾‹å­å¯èƒ½æ˜¯åˆ†æ•°æ˜¾ç¤ºã€‚</p><p>å¯¹äºåˆ†æ•°ï¼Œå¯æ˜¾ç¤ºå­—ç¬¦æ¥è‡ªä¸€ä¸ªå·²çŸ¥çš„å­—å½¢é›†ï¼ˆæ•°å­— 0-9ï¼‰ï¼Œä¸éšåœ°åŒºå˜åŒ–ï¼Œå¹¶ä»¥å›ºå®šè·ç¦»å½¼æ­¤å‡ºç°ã€‚ç¼–å†™è¿™ç§ä¸“é—¨çš„æ•°å­—æ˜¾ç¤ºç³»ç»Ÿç›¸å¯¹ç®€å•ï¼Œå¯ä»¥ä»¥æ— åˆ†é…ä¸”è®¡ç®—ã€åŠ¨ç”»å’Œæ˜¾ç¤ºé€Ÿåº¦æ˜æ˜¾å¿«äº Canvas é©±åŠ¨çš„ UI Text ç»„ä»¶çš„æ–¹å¼å®ç°ã€‚</p><p><strong>åå¤‡å­—ä½“å’Œå†…å­˜ä½¿ç”¨</strong></p><p>å¯¹äºå¿…é¡»æ”¯æŒå¤§å­—ç¬¦é›†çš„åº”ç”¨ç¨‹åºï¼Œå¾ˆè¯±äººçš„æ˜¯åœ¨å­—ä½“å¯¼å…¥å™¨çš„ <code>Font Names</code> å­—æ®µä¸­åˆ—å‡ºå¤§é‡å­—ä½“ã€‚<code>Font Names</code> å­—æ®µä¸­åˆ—å‡ºçš„ä»»ä½•å­—ä½“éƒ½å°†ç”¨ä½œå¦‚æœåœ¨ä¸»å­—ä½“ä¸­æ‰¾ä¸åˆ°å­—å½¢æ—¶çš„åå¤‡å­—ä½“ã€‚åå¤‡é¡ºåºç”± <code>Font Names</code> å­—æ®µä¸­åˆ—å‡ºçš„å­—ä½“é¡ºåºå†³å®šã€‚</p><p>ç„¶è€Œï¼Œä¸ºäº†æ”¯æŒæ­¤è¡Œä¸ºï¼ŒUnity å°†ä¿æŒ <code>Font Names</code> å­—æ®µä¸­åˆ—å‡ºçš„æ‰€æœ‰å­—ä½“åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å¦‚æœå­—ä½“çš„å­—ç¬¦é›†éå¸¸å¤§ï¼Œåˆ™åå¤‡å­—ä½“æ¶ˆè€—çš„å†…å­˜é‡å¯èƒ½å˜å¾—è¿‡å¤šã€‚è¿™åœ¨åŒ…å«è±¡å½¢å­—ä½“ï¼ˆå¦‚æ—¥æœ¬æ±‰å­—æˆ–ä¸­æ–‡å­—ç¬¦ï¼‰æ—¶æœ€å¸¸è§ã€‚</p><p><strong>Best Fit å’Œæ€§èƒ½</strong></p><p>é€šå¸¸ï¼ŒUI Text ç»„ä»¶çš„ Best Fit è®¾ç½®æ°¸è¿œä¸åº”ä½¿ç”¨ã€‚</p><p><code>Best Fit</code> åŠ¨æ€è°ƒæ•´å­—ä½“å¤§å°åˆ°å¯ä»¥åœ¨ Text ç»„ä»¶çš„è¾¹ç•Œæ¡†å†…æ˜¾ç¤ºè€Œä¸æº¢å‡ºçš„æœ€å¤§æ•´æ•°ç‚¹å¤§å°ï¼Œé™åˆ¶åœ¨å¯é…ç½®çš„æœ€å°/æœ€å¤§ç‚¹å¤§å°èŒƒå›´å†…ã€‚ç„¶è€Œï¼Œç”±äº Unity ä¸ºæ˜¾ç¤ºçš„æ¯ä¸ªä¸åŒå¤§å°çš„å­—ç¬¦æ¸²æŸ“ä¸åŒçš„å­—å½¢åˆ°å­—ä½“å›¾é›†ä¸­ï¼Œä½¿ç”¨ Best Fit ä¼šè¿…é€Ÿç”¨è®¸å¤šä¸åŒå¤§å°çš„å­—å½¢æ·¹æ²¡å›¾é›†ã€‚</p><p>æˆªè‡³ Unity 2017.3ï¼Œ<code>Best Fit</code> ä½¿ç”¨çš„å¤§å°æ£€æµ‹ä¸æ˜¯æœ€ä¼˜çš„ã€‚å®ƒä¸ºæµ‹è¯•çš„æ¯ä¸ªå¤§å°å¢é‡åœ¨å›¾é›†ä¸­ç”Ÿæˆå­—å½¢ï¼Œè¿™è¿›ä¸€æ­¥å¢åŠ äº†ç”Ÿæˆå­—ä½“å›¾é›†æ‰€éœ€çš„æ—¶é—´ã€‚å®ƒè¿˜ç»å¸¸å¯¼è‡´å›¾é›†æº¢å‡ºï¼Œè¿™ä¼šå¯¼è‡´æ—§å­—å½¢è¢«è¸¢å‡ºå›¾é›†ã€‚ç”±äº <code>Best Fit</code> è®¡ç®—éœ€è¦å¤§é‡æµ‹è¯•ï¼Œè¿™é€šå¸¸ä¼šå¼ºåˆ¶å­—ä½“å›¾é›†åœ¨è®¡ç®—å‡ºé€‚å½“çš„å­—ä½“å¤§å°åè‡³å°‘å†é‡å»ºä¸€æ¬¡ã€‚æ­¤ç‰¹å®šé—®é¢˜å·²åœ¨ Unity 5.4 ä¸­çº æ­£ï¼Œ<code>Best Fit</code> ä¸ä¼šä¸å¿…è¦åœ°æ‰©å±•å­—ä½“çš„çº¹ç†å›¾é›†ï¼Œä½†ä»ç„¶æ¯”é™æ€å¤§å°çš„æ–‡æœ¬æ…¢å¾—å¤šã€‚</p><p>é¢‘ç¹çš„å­—ä½“å›¾é›†é‡å»ºä¼šè¿…é€Ÿé™ä½è¿è¡Œæ—¶æ€§èƒ½å¹¶å¯¼è‡´å†…å­˜ç¢ç‰‡ã€‚è®¾ç½®ä¸º <code>Best Fit</code> çš„æ–‡æœ¬ç»„ä»¶æ•°é‡è¶Šå¤šï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—è¶Šä¸¥é‡ã€‚</p><h3 id="textmeshpro-æ–‡æœ¬" tabindex="-1"><a class="header-anchor" href="#textmeshpro-æ–‡æœ¬"><span>TextMeshPro æ–‡æœ¬</span></a></h3><p>TextMesh Pro (TMP)æ˜¯ Unity ç°æœ‰æ–‡æœ¬ç»„ä»¶ï¼ˆå¦‚ Text Mesh å’Œ UI Textï¼‰çš„æ›¿ä»£å“ã€‚TextMesh Pro ä½¿ç”¨æœ‰ç¬¦å·è·ç¦»åœº(SDF)ä½œä¸ºå…¶ä¸»è¦æ–‡æœ¬æ¸²æŸ“ç®¡é“ï¼Œä½¿å¾—å¯ä»¥åœ¨ä»»ä½•ç‚¹å¤§å°å’Œåˆ†è¾¨ç‡ä¸‹æ¸…æ™°åœ°æ¸²æŸ“æ–‡æœ¬ã€‚ä½¿ç”¨ä¸€ç»„æ—¨åœ¨åˆ©ç”¨ SDF æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›çš„è‡ªå®šä¹‰ç€è‰²å™¨ï¼ŒTextMesh Pro å¯ä»¥é€šè¿‡ç®€å•åœ°æ›´æ”¹æè´¨å±æ€§æ¥åŠ¨æ€æ”¹å˜æ–‡æœ¬çš„è§†è§‰å¤–è§‚ï¼Œä»¥æ·»åŠ è§†è§‰æ ·å¼ï¼Œå¦‚è†¨èƒ€ã€è½®å»“ã€è½¯é˜´å½±ã€æ–œè§’ã€çº¹ç†ã€å‘å…‰ç­‰ï¼Œå¹¶é€šè¿‡åˆ›å»º/ä½¿ç”¨æè´¨é¢„è®¾æ¥ä¿å­˜å’Œè°ƒç”¨è¿™äº›è§†è§‰æ ·å¼ã€‚</p><p>åœ¨ 2018.1 å‘å¸ƒä¹‹å‰ï¼ŒTextMesh Pro ä½œä¸º Asset Store åŒ…åŒ…å«åœ¨é¡¹ç›®ä¸­ã€‚ä» 2018.1 å¼€å§‹ï¼ŒTextMesh Pro å°†ä½œä¸º <a href="https://docs.unity3d.com/Packages/com.unity.package-manager-ui@latest/index.html" target="_blank" rel="noopener noreferrer">Package Manager</a> åŒ…æä¾›ã€‚</p><p><strong>æ–‡æœ¬ç½‘æ ¼é‡å»º</strong></p><p>ä¸ Unity å†…ç½®çš„ UIText ç»„ä»¶éå¸¸ç›¸ä¼¼ï¼Œæ›´æ”¹ç»„ä»¶æ˜¾ç¤ºçš„æ–‡æœ¬å°†è§¦å‘å¯¹ <code>Canvas.SendWillRendererCanvases</code> å’Œ <code>Canvas.BuildBatch</code> çš„è°ƒç”¨ï¼Œè¿™å¯èƒ½å¾ˆæ˜‚è´µã€‚æœ€å°åŒ–å¯¹ TextMeshProUGUI ç»„ä»¶çš„æ–‡æœ¬å­—æ®µçš„æ›´æ”¹ï¼Œå¹¶ç¡®ä¿å°†æ–‡æœ¬ç»å¸¸å˜åŒ–çš„ TextMeshProUGUI ç»„ä»¶çˆ¶çº§åˆ°å…·æœ‰è‡ªå·±çš„ Canvas ç»„ä»¶çš„çˆ¶ GameObjectï¼Œä»¥ç¡®ä¿ Canvas é‡å»ºè°ƒç”¨å°½å¯èƒ½é«˜æ•ˆã€‚</p><p>è¯·æ³¨æ„ï¼Œå¯¹äºåœ¨ä¸–ç•Œç©ºé—´ä¸­æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å»ºè®®ç”¨æˆ·ä½¿ç”¨æ™®é€šçš„ <code>TextMeshPro</code> ç»„ä»¶è€Œä¸æ˜¯ <code>TextMeshProUGUI</code>ï¼Œå› ä¸ºåœ¨ Worldspace ä¸­ä½¿ç”¨ Canvas å¯èƒ½æ•ˆç‡ä½ä¸‹ã€‚ç›´æ¥ä½¿ç”¨ TextMeshPro ä¼šæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä¸ä¼šäº§ç”Ÿ canvas ç³»ç»Ÿå¼€é”€ã€‚</p><p><strong>å­—ä½“å’Œå†…å­˜ä½¿ç”¨</strong></p><p>é‰´äº TMP ä¸­æ²¡æœ‰åŠ¨æ€å­—ä½“åŠŸèƒ½ï¼Œå¿…é¡»ä¾èµ–åå¤‡å­—ä½“ã€‚äº†è§£å¦‚ä½•åŠ è½½å’Œä½¿ç”¨åå¤‡å­—ä½“å¯¹äºåœ¨ä½¿ç”¨ TMP æ—¶ä¼˜åŒ–å†…å­˜è‡³å…³é‡è¦ã€‚</p><p>TMP ä¸­çš„å­—å½¢å‘ç°æ˜¯é€’å½’å®Œæˆçš„ - ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å­—å½¢ä» TMP å­—ä½“èµ„æºä¸­ç¼ºå¤±æ—¶ï¼ŒTMP ä¼šéå†å½“å‰åˆ†é…æˆ–æ´»åŠ¨çš„åå¤‡å­—ä½“èµ„æºåˆ—è¡¨ï¼Œä»åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªåå¤‡å­—ä½“å¼€å§‹ï¼Œå¹¶é€šè¿‡å®ƒä»¬è‡ªå·±çš„åå¤‡å­—ä½“ã€‚å¦‚æœä»ç„¶æ‰¾ä¸åˆ°æ‰€éœ€çš„å­—å½¢ï¼ŒTMP å°†æœç´¢å¯èƒ½åˆ†é…ç»™æ–‡æœ¬å¯¹è±¡çš„ä»»ä½• Sprite èµ„æºä»¥åŠåˆ†é…ç»™æ­¤ Sprite èµ„æºçš„ä»»ä½•åå¤‡èµ„æºã€‚å¦‚æœä»ç„¶æ‰¾ä¸åˆ°æ‰€éœ€çš„å­—å½¢ï¼ŒTMP å°†é€’å½’æœç´¢ TMP è®¾ç½®æ–‡ä»¶ä¸­åˆ†é…çš„ä¸€èˆ¬åå¤‡å­—ä½“ï¼Œç„¶åæ˜¯é»˜è®¤ Sprite èµ„æºã€‚å¦‚æœä»ç„¶æ— æ³•å®šä½æ­¤å­—å½¢ï¼Œå®ƒå°†ä½¿ç”¨ TMP è®¾ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ Missing Glyph Replacement å­—ç¬¦ã€‚</p><p>TextMesh Pro çš„å­—ä½“èµ„æºåœ¨åœºæ™¯æˆ–é¡¹ç›®ä¸­å¼•ç”¨æ—¶åŠ è½½ã€‚å®ƒä»¬ä¸»è¦ç”± TextMeshPro æ–‡æœ¬ç»„ä»¶ã€TMP è®¾ç½®ä»¥åŠå­—ä½“èµ„æºæœ¬èº«ä½œä¸ºåå¤‡å­—ä½“å¼•ç”¨ã€‚å¦‚æœåœ¨ TMP è®¾ç½®èµ„æºä¸­å¼•ç”¨äº†å­—ä½“èµ„æºï¼Œåˆ™è¿™äº›å­—ä½“èµ„æºåŠå…¶æ‰€æœ‰åå¤‡å­—ä½“èµ„æºå°†åœ¨æ¿€æ´»ç¬¬ä¸€ä¸ªåŒ…å« TMP æ–‡æœ¬ç»„ä»¶çš„åœºæ™¯æ—¶é€’å½’åŠ è½½ã€‚å¦‚æœå¼•ç”¨äº†é»˜è®¤ç²¾çµè¡¨èµ„æºï¼Œå®ƒä¹Ÿå°†è¢«åŠ è½½ã€‚</p><p>æ­¤å¤–ï¼Œå½“å­—ä½“èµ„æºç”±ç»™å®šåœºæ™¯ä¸­çš„ TextMeshPro ç»„ä»¶å¼•ç”¨ä¸”å°šæœªé€šè¿‡ TMP è®¾ç½®åŠ è½½æ—¶ï¼Œåˆ™å¼•ç”¨çš„å­—ä½“èµ„æºåŠå…¶æ‰€æœ‰åå¤‡å­—ä½“èµ„æºå°†åœ¨ç»„ä»¶æ¿€æ´»åé€’å½’åŠ è½½ã€‚åœ¨å¤„ç†å…·æœ‰è®¸å¤šå­—ä½“çš„é¡¹ç›®æ—¶ï¼Œç‰¹åˆ«æ˜¯å½“å¯ç”¨å†…å­˜æ˜¯ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œè®°ä½è¿™ä¸ªè¿‡ç¨‹å¾ˆé‡è¦ã€‚</p><p>ç”±äºä¸Šè¿°åŸå› ï¼Œåœ¨ä½¿ç”¨ TMP æ—¶æœ¬åœ°åŒ–é¡¹ç›®æˆä¸ºä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºé€šè¿‡ TMP è®¾ç½®é¢„å…ˆåŠ è½½æ‰€æœ‰æœ¬åœ°åŒ–è¯­è¨€å­—ä½“èµ„æºå°†å¯¹å†…å­˜å‹åŠ›æœ‰å®³ã€‚å¦‚æœéœ€è¦æœ¬åœ°åŒ–ï¼Œæˆ‘ä»¬å»ºè®®ä»…åœ¨å¿…è¦æ—¶ï¼ˆåŠ è½½å„ç§åœºæ™¯æ—¶ï¼‰åˆ†é…è¿™äº›å­—ä½“èµ„æºæˆ–åå¤‡å­—ä½“ï¼Œæˆ–ä½¿ç”¨ Asset Bundles ä»¥æ¨¡å—åŒ–æ–¹å¼åŠ è½½å­—ä½“èµ„æºçš„æ½œåœ¨ç­–ç•¥ã€‚</p><p>å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œåº”åŒ…æ‹¬ä¸€ä¸ªå¼•å¯¼æ­¥éª¤æ¥éªŒè¯ç”¨æˆ·çš„åŒºåŸŸè®¾ç½®å¹¶ä¸ºæ¯ä¸ªå­—ä½“èµ„æºè®¾ç½®å­—ä½“èµ„æºåå¤‡ï¼š</p><ol><li>ä¸ºåŸºç¡€ TMP å­—ä½“èµ„æºåˆ›å»º Asset Bundleï¼ˆä¾‹å¦‚ï¼Œæ¯ç§å­—ä½“çš„æœ€å°æ‹‰ä¸å­—å½¢ï¼‰</li><li>ä¸ºæ¯ç§è¯­è¨€æ‰€éœ€çš„åå¤‡ TMP å­—ä½“èµ„æºåˆ›å»º Asset Bundleï¼ˆä¾‹å¦‚ï¼Œæ—¥è¯­æ¯ç§å­—ä½“æ‰€éœ€çš„ TMP å­—ä½“èµ„æºä¸€ä¸ª Asset Bundleï¼‰</li><li>åœ¨å¼•å¯¼æ­¥éª¤ä¸­åŠ è½½åŸºç¡€ Asset Bundle</li><li>æ ¹æ®åŒºåŸŸè®¾ç½®ï¼ŒåŠ è½½å…·æœ‰åå¤‡å­—ä½“çš„æ‰€éœ€ Asset Bundle</li><li>å¯¹äºåŸºç¡€ Asset Bundle ä¸­çš„æ¯ç§å­—ä½“ï¼Œä»æœ¬åœ°åŒ–å­—ä½“ Asset Bundle åˆ†é…åå¤‡å­—ä½“èµ„æº</li><li>ç»§ç»­å¼•å¯¼æ¸¸æˆ</li></ol><p>å¦‚æœæœªä½¿ç”¨å›¾åƒï¼Œä¹Ÿå¯ä»¥ä» TMP è®¾ç½®ä¸­åˆ é™¤é»˜è®¤ Sprite èµ„æºå¼•ç”¨ï¼Œä»¥è·å¾—é€‚åº¦çš„é¢å¤–å†…å­˜èŠ‚çœã€‚</p><p><strong>Best Fit å’Œæ€§èƒ½</strong></p><p>å†æ¬¡å¼ºè°ƒï¼Œé‰´äº TextMesh Pro æ²¡æœ‰åŠ¨æ€å­—ä½“åŠŸèƒ½ï¼Œä¸Šè¿° UGUI UIText éƒ¨åˆ†ä¸­å…³äº Best Fit çš„é—®é¢˜ä¸ä¼šå‘ç”Ÿã€‚åœ¨ TextMesh Pro ç»„ä»¶ä¸Šä½¿ç”¨ Best Fit æ—¶å”¯ä¸€è¦è€ƒè™‘çš„æ˜¯ä½¿ç”¨äºŒåˆ†æœç´¢æ¥æ‰¾åˆ°æ­£ç¡®çš„å¤§å°ã€‚ä½¿ç”¨æ–‡æœ¬è‡ªåŠ¨è°ƒæ•´å¤§å°æ—¶ï¼Œæœ€å¥½æµ‹è¯•æœ€é•¿/æœ€å¤§æ–‡æœ¬å—çš„æœ€ä½³ç‚¹å¤§å°ã€‚ä¸€æ—¦ç¡®å®šæ­¤æœ€ä½³å¤§å°ï¼Œåœ¨ç»™å®šæ–‡æœ¬å¯¹è±¡ä¸Šç¦ç”¨è‡ªåŠ¨è°ƒæ•´å¤§å°ï¼Œç„¶åæ‰‹åŠ¨åœ¨å…¶ä»–æ–‡æœ¬å¯¹è±¡ä¸Šè®¾ç½®æ­¤æœ€ä½³ç‚¹å¤§å°ã€‚è¿™å…·æœ‰æé«˜æ€§èƒ½çš„ä¼˜åŠ¿ï¼Œå¹¶é¿å…ä¸€ç»„æ–‡æœ¬å¯¹è±¡ä½¿ç”¨ä¸åŒçš„ç‚¹å¤§å°ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯ç³Ÿç³•çš„è§†è§‰/æ’ç‰ˆå®è·µã€‚</p><h3 id="scroll-views" tabindex="-1"><a class="header-anchor" href="#scroll-views"><span>Scroll Views</span></a></h3><p>åœ¨å¡«å……ç‡é—®é¢˜ä¹‹åï¼ŒUnity UI çš„ Scroll Views æ˜¯è¿è¡Œæ—¶æ€§èƒ½é—®é¢˜çš„ç¬¬äºŒå¤§å¸¸è§æ¥æºã€‚Scroll Views é€šå¸¸éœ€è¦å¤§é‡ UI å…ƒç´ æ¥è¡¨ç¤ºå…¶å†…å®¹ã€‚æœ‰ä¸¤ç§åŸºæœ¬æ–¹æ³•æ¥å¡«å……æ»šåŠ¨è§†å›¾ï¼š</p><ul><li>ç”¨è¡¨ç¤ºæ‰€æœ‰æ»šåŠ¨è§†å›¾å†…å®¹æ‰€éœ€çš„æ‰€æœ‰å…ƒç´ å¡«å……å®ƒ</li><li>æ± åŒ–å…ƒç´ ï¼Œæ ¹æ®éœ€è¦é‡æ–°å®šä½å®ƒä»¬ä»¥è¡¨ç¤ºå¯è§å†…å®¹</li></ul><p>è¿™ä¸¤ç§è§£å†³æ–¹æ¡ˆéƒ½æœ‰é—®é¢˜ã€‚</p><p>ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆéšç€è¦è¡¨ç¤ºçš„é¡¹ç›®æ•°é‡å¢åŠ ï¼Œå®ä¾‹åŒ–æ‰€æœ‰ UI å…ƒç´ æ‰€éœ€çš„æ—¶é—´ä¹Ÿè¶Šæ¥è¶Šé•¿ï¼Œå¹¶ä¸”è¿˜å¢åŠ äº†é‡å»º Scroll View æ‰€éœ€çš„æ—¶é—´ã€‚å¦‚æœ Scroll View ä¸­åªéœ€è¦å°‘é‡å…ƒç´ ï¼Œä¾‹å¦‚ä»…éœ€è¦æ˜¾ç¤ºå°‘é‡ Text ç»„ä»¶çš„ Scroll Viewï¼Œåˆ™è¿™ç§æ–¹æ³•å› å…¶ç®€å•æ€§è€Œå—åˆ°é’çã€‚</p><p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆåœ¨å½“å‰ UI å’Œå¸ƒå±€ç³»ç»Ÿä¸‹éœ€è¦å¤§é‡ä»£ç æ‰èƒ½æ­£ç¡®å®ç°ã€‚ä¸‹é¢å°†è®¨è®ºä¸¤ç§å¯èƒ½çš„æ–¹æ³•ã€‚å¯¹äºä»»ä½•æ˜¾è‘—å¤æ‚çš„æ»šåŠ¨ UIï¼Œé€šå¸¸éœ€è¦æŸç§æ± åŒ–æ–¹æ³•æ¥é¿å…æ€§èƒ½é—®é¢˜ã€‚</p><p>å°½ç®¡å­˜åœ¨è¿™äº›é—®é¢˜ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡å‘ Scroll View æ·»åŠ  <code>RectMask2D</code> ç»„ä»¶æ¥æ”¹è¿›ã€‚æ­¤ç»„ä»¶ç¡®ä¿ä½äº Scroll View è§†å£ä¹‹å¤–çš„ Scroll View å…ƒç´ ä¸åŒ…å«åœ¨å¿…é¡»ç”Ÿæˆã€æ’åºå’Œåˆ†æå…¶å‡ ä½•å½¢çŠ¶çš„å¯ç»˜åˆ¶å…ƒç´ åˆ—è¡¨ä¸­ã€‚</p><p><strong>ç®€å•çš„ Scroll View å…ƒç´ æ± åŒ–</strong></p><p>åœ¨ä¿ç•™ä½¿ç”¨ Unity å†…ç½® Scroll View ç»„ä»¶çš„å¤§éƒ¨åˆ†ä¾¿åˆ©æ€§çš„åŒæ—¶å®ç°å¯¹è±¡æ± åŒ–çš„æœ€ç®€å•æ–¹æ³•æ˜¯é‡‡ç”¨æ··åˆæ–¹æ³•ï¼š</p><p>è¦åœ¨ UI ä¸­å¸ƒå±€å…ƒç´ ï¼ˆå…è®¸å¸ƒå±€ç³»ç»Ÿæ­£ç¡®è®¡ç®— Scroll View å†…å®¹çš„å¤§å°å¹¶ä½¿æ»šåŠ¨æ¡æ­£å¸¸å·¥ä½œï¼‰ï¼Œä½¿ç”¨å¸¦æœ‰ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/script-LayoutElement.html" target="_blank" rel="noopener noreferrer">Layout Element</a> ç»„ä»¶çš„ GameObject ä½œä¸ºå¯è§ UI å…ƒç´ çš„ <strong>å ä½ç¬¦</strong>ã€‚</p><p>ç„¶åï¼Œå®ä¾‹åŒ–è¶³ä»¥å¡«å…… Scroll View å¯è§éƒ¨åˆ†çš„å¯è§ UI å…ƒç´ æ± ï¼Œå¹¶å°†è¿™äº›å…ƒç´ çˆ¶çº§åˆ°å®šä½å ä½ç¬¦ã€‚éšç€ Scroll View æ»šåŠ¨ï¼Œé‡ç”¨ UI å…ƒç´ ä»¥æ˜¾ç¤ºæ»šåŠ¨åˆ°è§†å›¾ä¸­çš„å†…å®¹ã€‚</p><p>è¿™å°†å¤§å¤§å‡å°‘å¿…é¡»æ‰¹å¤„ç†çš„ UI å…ƒç´ æ•°é‡ï¼Œå› ä¸ºæ‰¹å¤„ç†çš„æˆæœ¬ä»…åŸºäº Canvas å†…çš„ Canvas Renderers æ•°é‡å¢åŠ ï¼Œè€Œä¸æ˜¯ Rect Transforms æ•°é‡ã€‚</p><p><strong>ç®€å•æ–¹æ³•çš„é—®é¢˜</strong></p><p>ç›®å‰ï¼Œæ¯å½“ä»»ä½• UI å…ƒç´ è¢«é‡æ–°çˆ¶çº§æˆ–å…¶å…„å¼Ÿé¡ºåºæ›´æ”¹æ—¶ï¼Œè¯¥å…ƒç´ åŠå…¶æ‰€æœ‰å­å…ƒç´ éƒ½è¢«æ ‡è®°ä¸º &quot;è„&quot; å¹¶å¼ºåˆ¶é‡å»ºå…¶ Canvasã€‚</p><p>åŸå› æ˜¯ Unity æ²¡æœ‰åˆ†ç¦»é‡æ–°çˆ¶çº§å˜æ¢å’Œæ›´æ”¹å…¶å…„å¼Ÿé¡ºåºçš„å›è°ƒã€‚è¿™ä¸¤ä¸ªäº‹ä»¶éƒ½ä¼šè§¦å‘ <a href="http://docs.unity3d.com/ScriptReference/MonoBehaviour.OnTransformParentChanged.html" target="_blank" rel="noopener noreferrer">OnTransformParentChanged</a> å›è°ƒã€‚åœ¨ Unity UI çš„ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.Graphic.html" target="_blank" rel="noopener noreferrer">Graphic</a> ç±»æºä»£ç ä¸­ï¼ˆå‚è§ Graphic.csï¼‰ï¼Œå®ç°äº†è¯¥å›è°ƒå¹¶è°ƒç”¨æ–¹æ³• <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.Graphic.html#UnityEngine_UI_Graphic_SetAllDirty" target="_blank" rel="noopener noreferrer">SetAllDirty</a>ã€‚é€šè¿‡å°† Graphic æ ‡è®°ä¸ºè„ï¼Œç³»ç»Ÿç¡®ä¿ Graphic å°†åœ¨ä¸‹ä¸€å¸§æ¸²æŸ“ä¹‹å‰é‡å»ºå…¶å¸ƒå±€å’Œé¡¶ç‚¹ã€‚</p><p>å¯ä»¥å°† Canvas åˆ†é…ç»™ Scroll View å†…æ¯ä¸ªå…ƒç´ çš„æ ¹ RectTransformï¼Œè¿™å°†æŠŠé‡å»ºé™åˆ¶åœ¨ä»…é‡æ–°çˆ¶çº§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ Scroll View çš„æ•´ä¸ªå†…å®¹ã€‚ç„¶è€Œï¼Œè¿™å¾€å¾€ä¼šå¢åŠ æ¸²æŸ“ Scroll View æ‰€éœ€çš„ç»˜åˆ¶è°ƒç”¨æ•°é‡ã€‚æ­¤å¤–ï¼Œå¦‚æœ Scroll View ä¸­çš„å„ä¸ªå…ƒç´ å¾ˆå¤æ‚ï¼Œç”±è¶…è¿‡ä¸€æ‰“ Graphic ç»„ä»¶ç»„æˆï¼Œç‰¹åˆ«æ˜¯å¦‚æœæ¯ä¸ªå…ƒç´ ä¸Šæœ‰å¤§é‡ Layout ç»„ä»¶ï¼Œåˆ™é‡å»ºå®ƒä»¬çš„æˆæœ¬é€šå¸¸è¶³å¤Ÿé«˜ï¼Œä»¥è‡³äºåœ¨ä½ç«¯è®¾å¤‡ä¸Šä¼šæ˜æ˜¾é™ä½å¸§ç‡ã€‚</p><p>å¦‚æœ Scroll View UI å…ƒç´ æ²¡æœ‰å¯å˜å¤§å°ï¼Œåˆ™è¿™ç§å®Œæ•´çš„å¸ƒå±€å’Œé¡¶ç‚¹é‡æ–°è®¡ç®—æ˜¯ä¸å¿…è¦çš„ã€‚ç„¶è€Œï¼Œé¿å…æ­¤è¡Œä¸ºéœ€è¦å®ç°åŸºäºä½ç½®å˜åŒ–è€Œä¸æ˜¯çˆ¶çº§æˆ–å…„å¼Ÿé¡ºåºå˜åŒ–çš„å¯¹è±¡æ± åŒ–è§£å†³æ–¹æ¡ˆã€‚</p><p><strong>åŸºäºä½ç½®çš„ Scroll View æ± </strong></p><p>ä¸ºäº†é¿å…ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªé€šè¿‡ç®€å•åœ°ç§»åŠ¨å…¶åŒ…å«çš„ UI å…ƒç´ çš„ RectTransforms æ¥æ± åŒ–å…¶å¯¹è±¡çš„ Scroll Viewã€‚å¦‚æœå®ƒä»¬çš„å°ºå¯¸æ²¡æœ‰æ”¹å˜ï¼Œè¿™é¿å…äº†éœ€è¦é‡å»ºç§»åŠ¨çš„ RectTransforms çš„å†…å®¹ï¼Œæ˜¾è‘—æé«˜äº† Scroll View çš„æ€§èƒ½ã€‚</p><p>è¦å®ç°è¿™ä¸€ç‚¹ï¼Œé€šå¸¸æœ€å¥½ç¼–å†™ Scroll View çš„è‡ªå®šä¹‰å­ç±»æˆ–ç¼–å†™è‡ªå®šä¹‰ Layout Group ç»„ä»¶ã€‚åè€…é€šå¸¸æ˜¯æ›´ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡å®ç° Unity UI çš„ <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.LayoutGroup.html" target="_blank" rel="noopener noreferrer">LayoutGroup</a> æŠ½è±¡åŸºç±»çš„å­ç±»æ¥å®Œæˆã€‚</p><p>è‡ªå®šä¹‰ Layout Group å¯ä»¥åˆ†æåº•å±‚æºæ•°æ®ä»¥æ£€æŸ¥å¿…é¡»æ˜¾ç¤ºå¤šå°‘æ•°æ®å…ƒç´ ï¼Œå¹¶é€‚å½“è°ƒæ•´ Scroll View çš„ Content RectTransform å¤§å°ã€‚ç„¶åå®ƒå¯ä»¥è®¢é˜… <a href="https://docs.unity3d.com/Packages/com.unity.ugui@2.0/api/UnityEngine.UI.ScrollRect.html" target="_blank" rel="noopener noreferrer">Scroll View change events</a> å¹¶ä½¿ç”¨è¿™äº›äº‹ä»¶ç›¸åº”åœ°é‡æ–°å®šä½å…¶å¯è§å…ƒç´ ã€‚</p><h2 id="_6-å…¶ä»–-ui-ä¼˜åŒ–æŠ€æœ¯å’ŒæŠ€å·§" tabindex="-1"><a class="header-anchor" href="#_6-å…¶ä»–-ui-ä¼˜åŒ–æŠ€æœ¯å’ŒæŠ€å·§"><span>6. å…¶ä»– UI ä¼˜åŒ–æŠ€æœ¯å’ŒæŠ€å·§</span></a></h2><p>æœ‰æ—¶å°±æ˜¯æ²¡æœ‰å¹²å‡€çš„æ–¹æ³•æ¥ä¼˜åŒ– UIã€‚æœ¬èŠ‚åŒ…å«ä¸€äº›å¯èƒ½æœ‰åŠ©äºæé«˜ UI æ€§èƒ½çš„å»ºè®®ï¼Œä½†æœ‰äº›åœ¨ç»“æ„ä¸Š&quot;ä¸å¹²å‡€&quot;ï¼Œå¯èƒ½éš¾ä»¥ç»´æŠ¤ï¼Œæˆ–è€…å¯èƒ½æœ‰ä¸‘é™‹çš„å‰¯ä½œç”¨ã€‚å…¶ä»–å¯èƒ½æ˜¯ UI ä¸­æ—¨åœ¨ç®€åŒ–åˆå§‹å¼€å‘çš„è¡Œä¸ºçš„è§£å†³æ–¹æ³•ï¼Œä½†ä¹Ÿä½¿å¾—ç›¸å¯¹ç®€å•åœ°åˆ›å»ºæ€§èƒ½é—®é¢˜ã€‚</p><h3 id="åŸºäº-recttransform-çš„å¸ƒå±€" tabindex="-1"><a class="header-anchor" href="#åŸºäº-recttransform-çš„å¸ƒå±€"><span>åŸºäº RectTransform çš„å¸ƒå±€</span></a></h3><p>Layout ç»„ä»¶ç›¸å¯¹æ˜‚è´µï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»åœ¨æ¯æ¬¡è¢«æ ‡è®°ä¸ºè„æ—¶é‡æ–°è®¡ç®—å…¶å­å…ƒç´ çš„å¤§å°å’Œä½ç½®ã€‚ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="#graphic-%E9%87%8D%E5%BB%BA">åŸºç¡€æ­¥éª¤ä¸­çš„ Graphic é‡å»º</a> éƒ¨åˆ†ã€‚ï¼‰å¦‚æœç»™å®š Layout ä¸­æœ‰ç›¸å¯¹å°‘é‡ä¸”å›ºå®šæ•°é‡çš„å…ƒç´ ï¼Œå¹¶ä¸” Layout å…·æœ‰ç›¸å¯¹ç®€å•çš„ç»“æ„ï¼Œåˆ™å¯èƒ½å¯ä»¥ç”¨åŸºäº RectTransform çš„å¸ƒå±€æ›¿æ¢ Layoutã€‚</p><p>é€šè¿‡åˆ†é… RectTransform çš„é”šç‚¹ï¼Œå¯ä»¥ä½¿ RectTransform çš„ä½ç½®å’Œå¤§å°åŸºäºå…¶çˆ¶çº§ç¼©æ”¾ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„ä¸¤åˆ—å¸ƒå±€å¯ä»¥é€šè¿‡ä¸¤ä¸ª RectTransforms å®ç°ï¼š</p><ul><li>å·¦åˆ—çš„é”šç‚¹åº”ä¸º X: (0, 0.5) å’Œ Y: (0, 1)</li><li>å³åˆ—çš„é”šç‚¹åº”ä¸º X: (0.5, 1) å’Œ Y: (0, 1)</li></ul><p>RectTransform çš„å¤§å°å’Œä½ç½®è®¡ç®—å°†ç”± Transform ç³»ç»Ÿæœ¬èº«åœ¨æœ¬æœºä»£ç ä¸­é©±åŠ¨ã€‚è¿™é€šå¸¸æ¯”ä¾èµ– Layout ç³»ç»Ÿæ›´é«˜æ•ˆã€‚ä¹Ÿå¯ä»¥ç¼–å†™è®¾ç½®åŸºäº RectTransform çš„å¸ƒå±€çš„ MonoBehavioursã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„ä»»åŠ¡ï¼Œè¶…å‡ºäº†æœ¬æŒ‡å—çš„èŒƒå›´ã€‚</p><h3 id="ç¦ç”¨-canvas" tabindex="-1"><a class="header-anchor" href="#ç¦ç”¨-canvas"><span>ç¦ç”¨ Canvas</span></a></h3><p>åœ¨æ˜¾ç¤ºæˆ–éšè— UI çš„ç¦»æ•£éƒ¨åˆ†æ—¶ï¼Œé€šå¸¸å¯ç”¨æˆ–ç¦ç”¨ UI æ ¹éƒ¨çš„ GameObjectã€‚è¿™ç¡®ä¿ç¦ç”¨ UI ä¸­çš„ä»»ä½•ç»„ä»¶ä¸ä¼šæ¥æ”¶è¾“å…¥æˆ– Unity å›è°ƒã€‚</p><p>ç„¶è€Œï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ Canvas ä¸¢å¼ƒå…¶ VBO æ•°æ®ã€‚é‡æ–°å¯ç”¨ Canvas å°†è¦æ±‚ Canvasï¼ˆå’Œä»»ä½•å­ Canvasï¼‰è¿è¡Œé‡å»ºå’Œé‡æ–°æ‰¹å¤„ç†è¿‡ç¨‹ã€‚å¦‚æœè¿™ç§æƒ…å†µé¢‘ç¹å‘ç”Ÿï¼Œå¢åŠ çš„ CPU ä½¿ç”¨ç‡å¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºçš„å¸§ç‡å¡é¡¿ã€‚</p><p>ä¸€ä¸ªå¯èƒ½ä½†æœ‰ç‚¹ hacky çš„è§£å†³æ–¹æ³•æ˜¯å°†è¦æ˜¾ç¤º/éšè—çš„ UI æ”¾åœ¨è‡ªå·±çš„ Canvas æˆ–å­ Canvas ä¸Šï¼Œç„¶åä»…å¯ç”¨/ç¦ç”¨æ­¤å¯¹è±¡ä¸Šçš„ Canvas ç»„ä»¶ã€‚</p><p>è¿™å°†å¯¼è‡´ UI çš„ç½‘æ ¼ä¸è¢«ç»˜åˆ¶ï¼Œä½†å®ƒä»¬å°†ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å®ƒä»¬çš„åŸå§‹æ‰¹å¤„ç†å°†è¢«ä¿ç•™ã€‚æ­¤å¤–ï¼ŒUI å±‚æ¬¡ç»“æ„ä¸­ä¸ä¼šè°ƒç”¨ä»»ä½• <a href="http://docs.unity3d.com/ScriptReference/MonoBehaviour.OnEnable.html" target="_blank" rel="noopener noreferrer">OnEnable</a> æˆ– <a href="http://docs.unity3d.com/ScriptReference/MonoBehaviour.OnDisable.html" target="_blank" rel="noopener noreferrer">OnDisable</a> å›è°ƒã€‚</p><p>ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™ä¸ä¼šç¦ç”¨éšè— UI ä¸­çš„ä»»ä½• MonoBehavioursï¼Œå› æ­¤è¿™äº› MonoBehaviours ä»å°†æ¥æ”¶ Unity ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œå¦‚ Updateã€‚</p><p>ä¸ºé¿å…æ­¤é—®é¢˜ï¼Œå°†ä»¥æ­¤æ–¹å¼ç¦ç”¨çš„ UI ä¸Šçš„ MonoBehaviours ä¸åº”ç›´æ¥å®ç° Unity çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œè€Œåº”ä» UI æ ¹ GameObject ä¸Šçš„ <code>Callback Manager</code> MonoBehaviour æ¥æ”¶å®ƒä»¬çš„å›è°ƒã€‚è¿™ä¸ª <code>Callback Manager</code> å¯ä»¥åœ¨ UI æ˜¾ç¤º/éšè—æ—¶å¾—åˆ°é€šçŸ¥ï¼Œå¹¶å¯ä»¥ç¡®ä¿æ ¹æ®éœ€è¦ä¼ æ’­æˆ–ä¸ä¼ æ’­ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚å…³äºæ­¤ <code>Callback Manager</code> æ¨¡å¼çš„è¿›ä¸€æ­¥è§£é‡Šè¶…å‡ºäº†æœ¬æŒ‡å—çš„èŒƒå›´ã€‚</p><h3 id="åˆ†é…äº‹ä»¶ç›¸æœº" tabindex="-1"><a class="header-anchor" href="#åˆ†é…äº‹ä»¶ç›¸æœº"><span>åˆ†é…äº‹ä»¶ç›¸æœº</span></a></h3><p>å¦‚æœå°† Canvas è®¾ç½®ä¸º <code>World Space</code> æˆ– <code>Screen Space - Camera</code> æ¨¡å¼å¹¶ä½¿ç”¨ Unity çš„å†…ç½® Input Managersï¼Œåˆ™å§‹ç»ˆè®¾ç½® Event Camera æˆ– Render Camera å±æ€§éå¸¸é‡è¦ã€‚ä»è„šæœ¬ä¸­ï¼Œè¿™å§‹ç»ˆä½œä¸º <a href="http://docs.unity3d.com/ScriptReference/Canvas-worldCamera.html" target="_blank" rel="noopener noreferrer">worldCamera</a> å±æ€§å…¬å¼€ã€‚</p><p>å¦‚æœæœªè®¾ç½®æ­¤å±æ€§ï¼Œåˆ™ Unity UI å°†é€šè¿‡æŸ¥æ‰¾å¸¦æœ‰ Main Camera æ ‡ç­¾çš„ GameObject ä¸Šçš„ Camera ç»„ä»¶æ¥æœç´¢ä¸»ç›¸æœºã€‚æ­¤æŸ¥æ‰¾å°†é’ˆå¯¹æ¯ä¸ª <code>World Space</code> æˆ– Camera Space Canvas è‡³å°‘å‘ç”Ÿä¸€æ¬¡ã€‚ç”±äº <a href="http://docs.unity3d.com/ScriptReference/GameObject.FindWithTag.html" target="_blank" rel="noopener noreferrer">GameObject.FindWithTag</a> å·²çŸ¥å¾ˆæ…¢ï¼Œå¼ºçƒˆå»ºè®®æ‰€æœ‰ World Space å’Œ Camera Space Canvas åœ¨è®¾è®¡æ—¶æˆ–åˆå§‹åŒ–æ—¶åˆ†é…å…¶ Camera å±æ€§ã€‚</p><p>æ­¤é—®é¢˜ä¸ä¼šå‘ç”Ÿåœ¨ Overlay Canvas ä¸Šã€‚</p><h3 id="ui-æºä»£ç å®šåˆ¶" tabindex="-1"><a class="header-anchor" href="#ui-æºä»£ç å®šåˆ¶"><span>UI æºä»£ç å®šåˆ¶</span></a></h3><p>UI ç³»ç»Ÿè®¾è®¡ç”¨äºæ”¯æŒå¤§é‡ç”¨ä¾‹ã€‚è¿™ç§çµæ´»æ€§å¾ˆå¥½ï¼Œä½†ä¹Ÿæ„å‘³ç€ä¸€äº›ä¼˜åŒ–åœ¨ä¸ç ´åå…¶ä»–åŠŸèƒ½çš„æƒ…å†µä¸‹ä¸å®¹æ˜“å®Œæˆã€‚å¦‚æœæœ€ç»ˆå¤„äºå¯ä»¥é€šè¿‡æ›´æ”¹ C# UI æºä»£ç è·å¾—ä¸€äº› CPU å‘¨æœŸçš„æƒ…å†µï¼Œå¯ä»¥é‡æ–°ç¼–è¯‘ UI DLL å¹¶è¦†ç›– Unity é™„å¸¦çš„ DLLã€‚</p><p>è¿™åº”è¯¥åªä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå› ä¸ºæœ‰ä¸€äº›é‡è¦çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•å°†æ­¤æ–° DLL åˆ†å‘ç»™å¼€å‘äººå‘˜å’Œæ„å»ºæœºå™¨ã€‚ç„¶åï¼Œæ¯æ¬¡å‡çº§ Unity æ—¶ï¼Œå¿…é¡»å°†æ›´æ”¹ä¸æ–° UI æºä»£ç åˆå¹¶ã€‚åœ¨èµ°è¿™æ¡è·¯ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä¸èƒ½åªæ˜¯æ‰©å±•ç°æœ‰ç±»æˆ–ç¼–å†™è‡ªå·±çš„ç»„ä»¶ç‰ˆæœ¬ã€‚</p></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°ï¼š</span><time class="vp-meta-info" datetime="2025-05-13T11:42:22.000Z" data-allow-mismatch>2025/5/13 11:42</time></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/Unity/Optimization/%E4%BA%86%E8%A7%A3%20Unity%20%E4%B8%AD%E7%9A%84%E4%BC%98%E5%8C%96.html" aria-label="äº†è§£ Unity ä¸­çš„ä¼˜åŒ–" iconsizing="both"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->äº†è§£ Unity ä¸­çš„ä¼˜åŒ–</div></a><a class="route-link auto-link next" href="/Unity/Optimization/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" aria-label="åƒåœ¾å›æ”¶æœ€ä½³å®è·µ" iconsizing="both"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">åƒåœ¾å›æ”¶æœ€ä½³å®è·µ<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Copyright Â© 2024 Mr.Chen</div><div class="vp-copyright">Copyright Â© 2025 Mr.Chen </div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CsjGXEvU.js" defer></script>
  </body>
</html>
