import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a as n,o as r}from"./app-DPQe0olr.js";const s={};function o(i,a){return r(),t("div",null,a[0]||(a[0]=[n('<h1 id="用户界面-ui" tabindex="-1"><a class="header-anchor" href="#用户界面-ui"><span>用户界面(UI)</span></a></h1><p>UGUI <a href="https://fairygui.com/" target="_blank" rel="noopener noreferrer">FairyGUI</a></p><h2 id="ugui-系统的原理及其组件使用" tabindex="-1"><a class="header-anchor" href="#ugui-系统的原理及其组件使用"><span>UGUI 系统的原理及其组件使用</span></a></h2><p>UGUI 是在 3D 网格下建立起来的 UI 系统，它的每个可显示的元素都是通过3D模型网格的形式构建起来的。当UI系统被实例化时，UGUI系统首先要做的就是构建网格。</p><p>Unity3D 在制作一个图元，或者一个按钮，或者一个背景时，都会先构建一个方形网格，再将图片放入网格中。可以理解为构建了一个3D模型，用一个网格绑定一个材质球，材质球里存放要显示的图片。</p><p>UGUI 将一部分相同类型的图片集合起来合成一张图，然后将拥有相同图片、相同着色器的材质球指向同一个材质球，并且把分散开的模型网格合并起来，这样就生成几个大网格和几个不同图集的材质球，以及少许整张的图集，节省了很多材质球、图片、网格的渲染。这就是我们常常在UI系统制作中提到的图集概念，它把很多张图片放置在一张图集上，使得大量的图片和材质球不需要重复绘制，只要改变模型顶点上的UV和颜色即可。</p><p>UGUI 只把相同层级的元素，以及相同层级上的拥有相同材质球参数的进行合并处理。合并成一个网格，就相当于是一个静止的模型，如果移动了任何元素，或者销毁了任何元素，或者改变了任何元素的参数，原来合并的网格就不符合新的要求了，于是UGUI系统就会销毁这个网格，并重新构建一个。</p><p>UGUI系统在制作完成后，性能优劣差距很多时候都会出现在这里，我们要想方设法合并更多的元素，减少重构网格的次数，以达到更少的性能开销目的。</p><p><strong>Canvas</strong></p><p>Canvas 组件做的事情就是合并 Canvas 上的元素。合并的规则为，在同一个Canvas里，将相同层级、相同材质球的元素进行合并，从而减少 drawcall。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>相同层级并不是指 Gameobject 上的节点层级，而是覆盖层级。Canvas 里如果两个元素重叠，则可以认为它们是上下层关系。同一层级上的 UI 元素是不会重叠的。</p></div><p><strong>Image/RawImage</strong></p><p>Image组件仅能展示图集中的图元，但展示的图元可以参与合并，而RawImage组件能展示单张图片，但无法参与合并。</p><p><strong>Mask/RectMask2D</strong></p><p>两个组件主要是在剔除的方法上有所区别，其中Mask组件使用顶点重构的方式剔除矩形区域外的部分，而RectMask2D组件则采用着色器的剔除方式，每个元素都有自己的材质球实例和实例参数。</p>',15)]))}const m=e(s,[["render",o]]),l=JSON.parse('{"path":"/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2.html","title":"第四章：用户界面","lang":"zh-CN","frontmatter":{"title":"第四章：用户界面","article":false,"order":4},"git":{"createdTime":1744277214000,"updatedTime":1744277214000,"contributors":[{"name":"unknown","username":"unknown","email":"chenmengjie@cyou-inc.com","commits":1,"url":"https://github.com/unknown"}]},"readingTime":{"minutes":2.55,"words":765},"filePathRelative":"Unity/Books/主程手记/用户界面.md","localizedDate":"2025年4月10日","excerpt":""}');export{m as comp,l as data};
