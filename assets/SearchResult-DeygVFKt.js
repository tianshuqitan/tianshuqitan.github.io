import{f as K,u as W,g as X,h as Z,j as ee,t as te,i as ae,k as I,l as U,m as e,n as se,p as le,s as ie,R as M,q as re,v as oe,x as ne,y as ue,z as me,A as Q,B as O,C as ce,D as Ee,E as he,F as Be,L as ve,G as ye,H as de,I as pe,J as z,K as Ae,M as C}from"./app-D6gFNI3v.js";const ke=["/","/Bookmarks/","/Language/","/Nodejs/","/Nodejs/npm.html","/Nodejs/pnpm.html","/Unity/AssetBundle.html","/Unity/","/Vue/","/Bookmarks/AI/AI.html","/Bookmarks/AI/","/Bookmarks/AI/%E6%96%87%E7%94%9F%E5%9B%BE.html","/Bookmarks/GameDevelopment/Android.html","/Bookmarks/GameDevelopment/Cocos.html","/Bookmarks/GameDevelopment/Opengl.html","/Bookmarks/GameDevelopment/","/Bookmarks/GameDevelopment/Unity.html","/Bookmarks/GameDevelopment/Unreal.html","/Bookmarks/Language/CSharp.html","/Bookmarks/Language/Go.html","/Bookmarks/Language/Lua.html","/Bookmarks/Language/Python.html","/Bookmarks/Language/","/Bookmarks/Language/Rust.html","/Bookmarks/Miscellaneous/Daily.html","/Bookmarks/Miscellaneous/Github.html","/Bookmarks/Miscellaneous/","/Bookmarks/Miscellaneous/Software.html","/Bookmarks/Miscellaneous/Sublime.html","/Bookmarks/Programming/Programme.html","/Bookmarks/Programming/","/Language/Csharp/","/Language/Go/","/Unity/Interview/Interview_Sample.html","/Unity/Interview/Interview_Sample2.html","/Unity/Interview/Interview_Sample3.html","/Unity/Interview/Interview_Sample4.html","/Unity/Interview/Interview_Sample5.html","/Unity/Interview/","/Unity/Manual/","/Unity/Manual/Unity%20%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98.html","/Unity/Notes/","/Unity/Optimization/DrawCall%20%E4%BC%98%E5%8C%96.html","/Unity/Optimization/GPU%20%E5%AE%9E%E4%BE%8B%E5%8C%96.html","/Unity/Optimization/","/Unity/Optimization/SRP%20Batcher%20%E5%8A%A0%E9%80%9F%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD.html","/Unity/Optimization/Unity%20UI%20%E4%BC%98%E5%8C%96.html","/Unity/Optimization/Unity%20UI%20%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.html","/Unity/Optimization/Unity%20%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html","/Unity/Optimization/Unity%20%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%BD%A2%E4%BC%98%E5%8C%96.html","/Unity/Optimization/%E4%BA%86%E8%A7%A3%20Unity%20%E4%B8%AD%E7%9A%84%E4%BC%98%E5%8C%96.html","/Unity/Optimization/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html","/Unity/Optimization/%E6%89%8B%E5%8A%A8%E5%90%88%E5%B9%B6%E7%BD%91%E6%A0%BC.html","/Unity/Optimization/%E7%A8%8B%E5%BA%8F%E9%9B%86.html","/Unity/RoadMap/","/Unity/RoadMap/Unity%20%E6%8A%80%E6%9C%AF%E5%85%A8%E6%99%AF%E5%9B%BE.html","/Unity/RoadMap/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E8%B7%AF%E7%BA%BF%E5%9B%BE.html","/Vue/Vuepress/Config.html","/Vue/Vuepress/Deployment.html","/Vue/Vuepress/Install.html","/Vue/Vuepress/","/Vue/Vuepress/ThemeHope.html","/Language/Csharp/SourceCode/","/Language/Csharp/SourceCode/SourceCode_List.html","/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/C_%20%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9.html","/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/","/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/%E6%95%B0%E6%8D%AE%E8%A1%A8%E4%B8%8E%E7%A8%8B%E5%BA%8F.html","/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2.html","/Unity/Books/%E4%B8%BB%E7%A8%8B%E6%89%8B%E8%AE%B0/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84.html","/Unity/Notes/Memory/","/Unity/Notes/Memory/%E6%8F%AD%E7%A7%98%20Unity%20%E7%9A%84%E9%BB%91%E7%9B%92%E4%B8%96%E7%95%8C_%E9%AB%98%E5%B7%9D.html","/Unity/Notes/Memory/%E6%B5%85%E8%B0%88%20Unity%20%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86_%E9%AB%98%E5%B7%9D.html","/404.html","/Unity/Books/","/category/","/tag/","/article/","/star/","/timeline/"],ge="SLIMSEARCH_QUERY_HISTORY",d=z(ge,[]),Ue=()=>{const{queryHistoryCount:l}=C;return{enabled:l>0,queryHistories:d,addQueryHistory:n=>{d.value=Array.from(new Set([n,...d.value.slice(0,l-1)]))},removeQueryHistory:n=>{d.value=[...d.value.slice(0,n),...d.value.slice(n+1)]}}},R=l=>ke[l.id]+("anchor"in l?`#${l.anchor}`:""),Ce="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:q}=C,p=z(Ce,[]),De=()=>({enabled:q>0,resultHistories:p,addResultHistory:o=>{{const n={link:R(o),display:o.display};"header"in o&&(n.header=o.header),p.value=[n,...p.value.slice(0,q-1)]}},removeResultHistory:o=>{p.value=[...p.value.slice(0,o),...p.value.slice(o+1)]}}),we=l=>{const{page:o,routeLocale:n}=ce(),D=Ee(),i=I(0),A=U(()=>i.value>0),c=he([]);return Be(()=>{const{search:w,terminate:B}=ve(),k=de(v=>{const{resultsFilter:S=s=>s,querySplitter:y,suggestionsFilter:F,...r}=D.value;v?(i.value+=1,w(v,n.value,r).then(s=>S(s,v,n.value,o.value)).then(s=>{i.value-=1,c.value=s}).catch(s=>{console.warn(s),i.value-=1,i.value||(c.value=[])})):c.value=[]},C.searchDelay-C.suggestDelay,{maxWait:5e3});ye([l,n],([v])=>k(v.join(" "))),pe(()=>{B()})}),{isSearching:A,results:c}};var fe=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:o}){const n=W(),D=X(),i=Z(ee),{addQueryHistory:A,queryHistories:c,removeQueryHistory:w}=Ue(),{resultHistories:B,addResultHistory:k,removeResultHistory:v}=De(),S=te(l,"queries"),{results:y,isSearching:F}=we(S),r=ae({isQuery:!0,index:0}),s=I(0),E=I(0),b=U(()=>c.value.length>0||B.value.length>0),f=U(()=>y.value.length>0),L=U(()=>y.value[s.value]||null),_=()=>{const{isQuery:t,index:a}=r;a===0?(r.isQuery=!t,r.index=t?B.value.length-1:c.value.length-1):r.index=a-1},V=()=>{const{isQuery:t,index:a}=r;a===(t?c.value.length-1:B.value.length-1)?(r.isQuery=!t,r.index=0):r.index=a+1},G=()=>{s.value=s.value>0?s.value-1:y.value.length-1,E.value=L.value.contents.length-1},P=()=>{s.value=s.value<y.value.length-1?s.value+1:0,E.value=0},$=()=>{E.value<L.value.contents.length-1?E.value+=1:P()},j=()=>{E.value>0?E.value-=1:G()},H=t=>t.map(a=>Ae(a)?a:e(a[0],a[1])),N=t=>{if(t.type==="customField"){const a=ue[t.index]||"$content",[h,u=""]=me(a)?a[D.value].split("$content"):a.split("$content");return t.display.map(m=>e("div",H([h,...m,u])))}return t.display.map(a=>e("div",H(a)))},g=()=>{s.value=0,E.value=0,o("updateQuery",""),o("close")},T=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},c.value.map((t,a)=>{const h=r.isQuery&&r.index===a;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{o("updateQuery",t)}},e("div",[e(Q,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:O,onClick:u=>{u.preventDefault(),u.stopPropagation(),w(a)}})]))}))])),Y=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},B.value.map((t,a)=>{const h=!r.isQuery&&r.index===a;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(M,{to:t.link,onClick:()=>{g()}},()=>[e(Q,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(u=>H(u)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:O,onClick:u=>{u.preventDefault(),u.stopPropagation(),v(a)}})]))}))]));return se("keydown",t=>{if(l.isFocusing){if(f.value){if(t.key==="ArrowUp")j();else if(t.key==="ArrowDown")$();else if(t.key==="Enter"){const a=L.value.contents[E.value];A(l.queries.join(" ")),k(a),n.push(R(a)),g()}}else if(t.key==="ArrowUp")_();else if(t.key==="ArrowDown")V();else if(t.key==="Enter"){const{index:a}=r;r.isQuery?(t.preventDefault(),o("updateQuery",c.value[a])):(n.push(B.value[a].link),g())}}}),le([s,E],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:l.queries.length?!f.value:!b.value}]},l.queries.length?F.value?e(ie,{hint:i.value.searching}):f.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:t,contents:a},h)=>{const u=s.value===h;return e("div",{class:["slimsearch-record",{active:u}],role:"group","aria-selected":u},[e("div",{class:"slimsearch-record-title"},t||i.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((m,J)=>{const x=u&&E.value===J;return e("li",{class:["slimsearch-record-matches",{active:x}],role:"option","aria-selected":x},e(M,{to:R(m),onClick:()=>{A(l.queries.join(" ")),k(m),g()}},()=>[m.type==="text"?null:e(m.type==="title"?re:m.type==="heading"?oe:ne,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[m.type==="text"&&m.header?e("div",{class:"slimsearch-record-content-header"},m.header):null,e("div",N(m))])]))}))])})):i.value.emptyResult:b.value?[T(),Y()]:i.value.emptyHistory)}});export{fe as default};
